(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{33:function(e,t,c){},51:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},59:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},68:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var a=c(26),n=c.n(a),r=c(7),s=c(24),i=c(8),o=c(5),l=c.n(o),u=c(1),d=c.n(u),j=c(4),b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAYCAYAAACIhL/AAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKySURBVHgB7VWxctpAEN09bHCoaBJE4kxwl85SMhh3wX+AvyBQpgL/AZSpgv8AynSkcxeqjCFjOJepIheekE5lmAza7ElIOiGUTIoUmdGbuZnj7und7du9BSBDhgwZ/inQtOof/Rk4cj493yZYlnVMmO8CQQMRqkTkMFkC0VDK2UjnmqZZBVHoMLf5t1y1RgSTbS5aL+q0mduL+fQoLlLroBADSIEvuDqXUjpeILA/QcTSTi64Azn/fOHrnrxmQwapXAIOanWmdHOVymFvs+4sv91fRs6dHPPlxtpnDiBes7DNP6pedCpyFAdG+dEXwMIVH2ikcgFPjcoTMMoP71DsqUAOAi7rXDF/qekagLnnfJ/3e5DmDuAAwzmNwS22pZw4ngMv6x0kGPgHiy47ZwdpYtjkFq3dXOiSyJvhIQiS1sWzRcBlZ1HgcBNQ07Jqr0TaBfnARjinvW5woIK8mV566Q32tTIgsW4nuHk88oew+JKhLri5ZozLtcf1No60wNzpoGmeVpVvgSOLxae7ZARe+pLL6/xXX6PW4Zt3vcUVaYSo7nbqAkkmNf0plnY6KOW17dWRjyq/uGQxU5hS0LiMn/66wJJK+/bQJVSdJ3QBIw6Sk5piIm4PAUThnb7n1YpWAlyvUVpADPhFP5PzWZ+7AgK5De1Tm70cat8N9eBVzXEJtML7uftjvc2o521rYup1mbE9ZPsJq7F14AfgrvooVGr99G101CjFuEgtdLmFYBT8b3SH3JfbMQdjqVAvDKgX2+Pa0EWYMwH3QV/1K9XIN5cKdBrxA6knb2ajxWJ2Sy61/qArWdfrmbnK48OGV/CJ4U64sb41yk9H/LvE1it3SkGPYzfUgRfLpf1DCS2X99+Z+8Hj+v3JCLkC2/yaw38H5t6GuttcX/dNoJshQ4b/Hb8AfRtUwmKpBawAAAAASUVORK5CYII=",m=(c(51),c(0)),p=function(){return Object(m.jsx)("footer",{className:"footer",children:Object(m.jsxs)("div",{className:"footer__container",children:[Object(m.jsx)("div",{className:"footer__logo-link",children:Object(m.jsx)(r.b,{className:"footer__link",to:"home",children:Object(m.jsx)("img",{src:b,alt:"logo"})})}),Object(m.jsxs)("div",{className:"footer__links",children:[Object(m.jsx)("a",{className:"footer__link",href:"https://github.com/mate-academy",target:"blank",children:"Github"}),Object(m.jsx)("a",{className:"footer__link",href:"https://github.com/mate-academy",target:"blank",children:"Contacts"}),Object(m.jsx)("a",{className:"footer__link",href:"https://github.com/mate-academy",target:"blank",children:"Rights"})]}),Object(m.jsx)("div",{className:"footer__back-to-top",children:Object(m.jsx)("a",{className:"footer__link_back-to-top",href:"/",onClick:function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},children:"Back to top"})})]})})},h=c(3),O=c(9),f=c.n(O);var g=c.p+"static/media/favourites.3639e3e4.svg",_=c.p+"static/media/Cart.08d4be14.svg",v=c.p+"static/media/search.66a1fd86.svg",x=c.p+"static/media/Union.2063b2da.svg",N=(c(53),function(){return Object(s.b)()}),y=s.c,k=function(){var e=Object(r.d)(),t=Object(h.a)(e,2),c=t[0],a=t[1],n=Object(j.m)(),s=c.get("query"),i=Object(u.useState)(s||""),o=Object(h.a)(i,2),l=o[0],d=o[1],p=Object(u.useState)(0),O=Object(h.a)(p,2),N=O[0],k=O[1],S=Object(u.useState)(0),w=Object(h.a)(S,2),C=w[0],A=w[1],I=Object(u.useState)(l),E=Object(h.a)(I,2),P=E[0],L=E[1],M=function(e,t){var c=Object(u.useState)(e),a=Object(h.a)(c,2),n=a[0],r=a[1];return Object(u.useEffect)((function(){var c=setTimeout((function(){r(e)}),t);return function(){clearTimeout(c)}}),[e,t]),n}(P,300),B=Object(u.useRef)(null),J=y((function(e){return e.user})).user,U=null===J||void 0===J?void 0:J.id,T="/favourites"===n.pathname||"/phones"===n.pathname||"/tablets"===n.pathname||"/accessories"===n.pathname;return Object(u.useEffect)((function(){var e=function(){var e=localStorage.getItem("favourites-".concat(U)),t=localStorage.getItem("cart-".concat(U));null!==e&&k(JSON.parse(e).length),null!==t&&A(JSON.parse(t).length)};return e(),window.addEventListener("favouritesUpdated",e),window.addEventListener("cartUpdated",e),function(){window.removeEventListener("favouritesUpdated",e),window.removeEventListener("cartUpdated",e)}}),[]),Object(u.useEffect)((function(){d(s||"")}),[s]),Object(u.useEffect)((function(){var e=function(e,t){var c=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];null===n?c.delete(a):Array.isArray(n)?(c.delete(a),n.forEach((function(e){c.append(a,e)}))):c.set(a,n)})),c.toString()}(c,{query:M||null});a(new URLSearchParams(e))}),[M]),Object(m.jsx)("header",{className:"homepage-header",children:Object(m.jsxs)("nav",{className:"navigation-header bg-red-200",children:[Object(m.jsx)("div",{className:"navigation-header__left",children:Object(m.jsxs)("ul",{className:"navigation-header__list navigation-header__list_left",children:[Object(m.jsx)("li",{className:"navigation-header__item logo",children:Object(m.jsx)(r.b,{to:"home",className:"navigation-header__link",children:Object(m.jsx)("img",{className:"navigation-header__image",src:b,alt:"logo"})})}),Object(m.jsx)("li",{className:"navigation-header__item_l",children:Object(m.jsx)(r.c,{to:"/",className:function(e){var t=e.isActive;return f()("navigation-header__link",{"is-active-link":t})},children:"Home"})}),Object(m.jsx)("li",{className:"navigation-header__item_l",children:Object(m.jsx)(r.c,{to:"/phones",className:function(e){var t=e.isActive;return f()("navigation-header__link",{"is-active-link":t})},children:"Phones"})}),Object(m.jsx)("li",{className:"navigation-header__item_l",children:Object(m.jsx)(r.c,{to:"/tablets",className:function(e){var t=e.isActive;return f()("navigation-header__link",{"is-active-link":t})},children:"Tablets"})}),Object(m.jsx)("li",{className:"navigation-header__item_l",children:Object(m.jsx)(r.c,{to:"/accessories",className:function(e){var t=e.isActive;return f()("navigation-header__link",{"is-active-link":t})},children:"Accessories"})})]})}),Object(m.jsx)("div",{className:"navigation-header__right",children:Object(m.jsxs)("ul",{className:"navigation-header__list navigation-header__list_right",children:[T&&Object(m.jsxs)("li",{className:f()({"navigation-header__item":!0,"navigation-header__item_input":!0}),children:[Object(m.jsx)("input",{"data-cy":"NameFilter",type:"text",className:"navigation-header__input",placeholder:"Search in ".concat(n.pathname.substring(1),"..."),value:l,ref:B,onChange:function(e){var t;t=e.target.value,d(t),L(t)}}),l?Object(m.jsx)("button",{className:"navigation-header__clear-button input-button",onClick:function(){d(""),c.delete("query"),a(new URLSearchParams(c.toString()))},type:"button",children:Object(m.jsx)("img",{src:x,alt:"clearButton"})}):Object(m.jsx)("button",{className:"navigation-header__search-button input-button",onClick:function(){B.current&&B.current.focus()},type:"button",children:Object(m.jsx)("img",{src:v,alt:"search"})})]}),Object(m.jsxs)("li",{className:"navigation-header__item",children:[Object(m.jsx)(r.b,{to:"/favourites",className:"navigation-header__link",children:Object(m.jsx)("img",{className:"navigation-header__image",src:g,alt:"favorites"})}),Object(m.jsx)("div",{className:"navigation-header__count",children:N})]}),Object(m.jsxs)("li",{className:"navigation-header__item",children:[Object(m.jsx)(r.b,{to:"/cart",className:"navigation-header__link",children:Object(m.jsx)("img",{className:"navigation-header__image",src:_,alt:"cart"})}),Object(m.jsx)("div",{className:"navigation-header__count",children:C})]})]})})]})})},S=c(10),w="https://mate-academy.github.io/react_phone-catalog/_new/products.json",C="https://mate-academy.github.io/react_phone-catalog/_new/";function A(e){return new Promise((function(t){return setTimeout(t,e)}))}function I(e){return E.apply(this,arguments)}function E(){return(E=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A(500).then((function(){return fetch(t)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return L.apply(this,arguments)}function L(){return(L=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A(500).then((function(){return fetch(t)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(e,t){return Object.entries(t).forEach((function(t){var c=Object(h.a)(t,2),a=c[0],n=c[1];e.set(a,n)})),new URLSearchParams(e.toString())},B=function(e,t){switch(t){case"age":return Object(S.a)(e).sort((function(e,t){return+t.year-+e.year}));case"price":return Object(S.a)(e).sort((function(e,t){return e.price-t.price}));case"name":return Object(S.a)(e).sort((function(e,t){return e.name.localeCompare(t.name)}));default:return e}},J=(c(54),function(){var e=Object(u.useState)(0),t=Object(h.a)(e,2),c=t[0],a=t[1],n=["".concat(C,"img/banner-phones.png"),"".concat(C,"img/banner-tablets.png"),"".concat(C,"img/banner-accessories.png")];return Object(u.useEffect)((function(){var e=setInterval((function(){a((function(e){return 2===e?0:e+1}))}),5e3);return function(){clearInterval(e)}}),[c]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("section",{className:"main-slider",children:[Object(m.jsx)("button",{type:"button",className:"main-slider__button slider__button_l",onClick:function(){a((function(e){return 0===e?2:e-1}))},children:"<"}),Object(m.jsx)("div",{className:"main-slider__container",children:Object(m.jsx)("ul",{className:"main-slider__list",children:n.map((function(e,t){return Object(m.jsx)("li",{className:f()("main-slider__item",{active:t===c}),children:Object(m.jsx)("img",{src:e,alt:"",className:"main-slider__img"})},e)}))})}),Object(m.jsx)("button",{type:"button",className:"main-slider__button main-slider__button_r",onClick:function(){a((function(e){return 2===e?0:e+1}))},children:">"}),Object(m.jsx)("div",{className:"main-slider__indicators",children:n.map((function(e,t){return Object(m.jsx)("button",{type:"button",className:f()("main-slider__count",{active:t===c}),onClick:function(){return a(t)}},e)}))})]})})}),U=c(13),T=(c(55),c.p+"static/media/favourites-added.d1cb0efa.svg"),q=function(e){var t=e.card,c=y((function(e){return e.user})).user,a=null===c||void 0===c?void 0:c.id,n=Object(u.useState)(!1),s=Object(h.a)(n,2),i=s[0],o=s[1],l=Object(u.useState)(!1),d=Object(h.a)(l,2),j=d[0],b=d[1];Object(u.useEffect)((function(){var e=localStorage.getItem("favourites-".concat(a)),c=e?JSON.parse(e):[];b(c.some((function(e){return e.id===t.id})));var n=localStorage.getItem("cart-".concat(a)),r=n?JSON.parse(n):[];o(r.some((function(e){return e.id===t.id})))}),[t]);return Object(m.jsxs)("div",{"data-cy":"cardsContainer",className:"card",children:[Object(m.jsx)(r.b,{to:"/phones/".concat(t.itemId),className:"card__image",children:Object(m.jsx)("img",{src:C+t.image,alt:t.name,className:"card__img"})}),Object(m.jsxs)("div",{className:"card__body",children:[Object(m.jsx)("div",{className:"card__title",children:t.name}),Object(m.jsxs)("div",{className:"card__prices prices",children:[Object(m.jsxs)("div",{className:"prices__discount",children:["$",t.price]}),Object(m.jsxs)("div",{className:"prices__full-price",children:["$",t.fullPrice]})]}),Object(m.jsxs)("div",{className:"card__description",children:[Object(m.jsxs)("div",{className:"card__screen card-screen",children:[Object(m.jsx)("div",{className:"card-screen__left",children:"Screen:"}),Object(m.jsx)("div",{className:"card-screen__right",children:t.screen})]}),Object(m.jsxs)("div",{className:"card__capacity card-capacity",children:[Object(m.jsx)("div",{className:"card-capacity__left",children:"Capacity:"}),Object(m.jsx)("div",{className:"card-capacity__right",children:t.capacity})]}),Object(m.jsxs)("div",{className:"card__ram card-ram",children:[Object(m.jsx)("div",{className:"card-ram__left",children:"RAM:"}),Object(m.jsx)("div",{className:"card-ram__right",children:t.ram})]})]})]}),Object(m.jsxs)("div",{className:"card__footer",children:[Object(m.jsx)("button",{type:"button",className:f()({card__button:!0,"card-button-template":!0,"is-active":i}),onClick:function(e){null===e||void 0===e||e.preventDefault();var c=localStorage.getItem("cart-".concat(a)),n=c?JSON.parse(c):[];n.some((function(e){return e.id===t.id}))||(n.push(Object(U.a)(Object(U.a)({},t),{},{quantity:1})),o(!0)),localStorage.setItem("cart-".concat(a),JSON.stringify(n)),window.dispatchEvent(new Event("cartUpdated"))},children:i?"Added to cart":"Add to cart"}),Object(m.jsx)("button",{type:"button",className:"card-button-template__like",onClick:function(){var e=localStorage.getItem("favourites-".concat(a)),c=e?JSON.parse(e):[],n=c.findIndex((function(e){return e.id===t.id}));-1===n?(c.push(t),b(!0)):(c.splice(n,1),b(!1)),localStorage.setItem("favourites-".concat(a),JSON.stringify(c)),window.dispatchEvent(new Event("favouritesUpdated"))},"data-cy":"addToFavorite",children:Object(m.jsx)("img",{src:j?T:g,style:{backgroundColor:"#fff"},alt:"favourite",className:"card-button-template__favourite"})})]})]})},R=(c(56),d.a.memo((function(e){var t=e.title,c=e.products,a=Object(u.useState)(0),n=Object(h.a)(a,2),r=n[0],s=n[1],i=Object(u.useState)(0),o=Object(h.a)(i,2),l=o[0],d=o[1],j=c.length;return Object(m.jsxs)("div",{className:"product-slider",children:[Object(m.jsxs)("div",{className:"product-slider__header",children:[Object(m.jsx)("div",{className:"product-slider__title",children:t}),Object(m.jsxs)("div",{className:"product-slider__buttons",children:[Object(m.jsx)("button",{type:"button",className:"product-slider__prev product-slider__button",onClick:function(){l>0&&(d(l-1),s(r+288))},children:"<"}),Object(m.jsx)("button",{type:"button",className:"product-slider__next product-slider__button",onClick:function(){l<j-4&&(d(l+1),s(r-288))},children:">"})]})]}),Object(m.jsx)("div",{className:"product-slider__slider-container",children:Object(m.jsx)("div",{className:"product-slider__row",style:{transform:"translateX(".concat(r,"px)"),transition:"transform ease-out 0.45s"},children:c.map((function(e){return Object(m.jsx)(q,{card:e},e.id)}))})})]})}))),F=c.p+"static/media/phones-banner.76a1b179.png",D=c.p+"static/media/tablets-banner.3131a36e.png",Q=c.p+"static/media/accessories-banner.f97da0dc.png",V=(c(57),function(){var e=y((function(e){return e.products})).products,t=Object(u.useMemo)((function(){return Object(S.a)(e).filter((function(e){return"phones"===e.category}))}),[e]),c=Object(u.useMemo)((function(){return Object(S.a)(e).filter((function(e){return"tablets"===e.category}))}),[e]),a=Object(u.useMemo)((function(){return Object(S.a)(e).filter((function(e){return"accessories"===e.category}))}),[e]);return Object(m.jsx)("div",{"data-cy":"categoryLinksContainer",className:"shop-category",children:Object(m.jsxs)("div",{className:"shop-category__container",children:[Object(m.jsx)("div",{className:"shop-category__title",children:"Shop by category"}),Object(m.jsxs)("div",{className:"shop-category__row",children:[Object(m.jsxs)("div",{className:"shop-category__item item-shop-category",children:[Object(m.jsx)(r.b,{to:"/phones",className:"item-shop-category__image",children:Object(m.jsx)("img",{src:F,alt:"BannerImage",className:"item-shop-category__img"})}),Object(m.jsxs)("div",{className:"item-shop-category__body",children:[Object(m.jsx)("div",{className:"item-shop-category__title",children:"Mobile phones"}),Object(m.jsxs)("div",{className:"item-shop-category__description",children:[t.length," ","models"]})]})]}),Object(m.jsxs)("div",{className:"shop-category__item item-shop-category",children:[Object(m.jsx)(r.b,{to:"/tablets",className:"item-shop-category__image",children:Object(m.jsx)("img",{src:D,alt:"TabletsBannerImage",className:"item-shop-category__img"})}),Object(m.jsxs)("div",{className:"item-shop-category__body",children:[Object(m.jsx)("div",{className:"item-shop-category__title",children:"Tablets"}),Object(m.jsxs)("div",{className:"item-shop-category__description",children:[c.length," ","models"]})]})]}),Object(m.jsxs)("div",{className:"shop-category__item item-shop-category",children:[Object(m.jsx)(r.b,{to:"/accessories",className:"item-shop-category__image",children:Object(m.jsx)("img",{src:Q,alt:"AccessoriesBannerImage",className:"item-shop-category__img"})}),Object(m.jsxs)("div",{className:"item-shop-category__body",children:[Object(m.jsx)("div",{className:"item-shop-category__title",children:"Accessories"}),Object(m.jsxs)("div",{className:"item-shop-category__description",children:[a.length," ","models"]})]})]})]})]})})}),H=function(){var e=y((function(e){return e.products})).products,t=Object(u.useMemo)((function(){return Object(S.a)(e).sort((function(e,t){return t.fullPrice-t.price-(e.fullPrice-e.price)}))}),[e]),c=Object(u.useMemo)((function(){return Object(S.a)(e).sort((function(e,t){return t.price-e.price}))}),[e]);return Object(m.jsx)("main",{className:"homepage",children:Object(m.jsxs)("div",{className:"homepage__content",children:[Object(m.jsx)(J,{}),Object(m.jsx)(R,{products:t,title:"Hot prices"}),Object(m.jsx)(V,{}),Object(m.jsx)(R,{products:c,title:"Brand new models"})]})})},Y=c.p+"static/media/Home.e110292a.svg",X=(c(58),function(e){var t=e.productName,c=e.productType;return Object(m.jsxs)("div",{"data-cy":"breadCrumbs",className:"phones-page__indicator indicator-name",children:[Object(m.jsx)("div",{className:"indicator-name__image",children:Object(m.jsx)(r.b,{to:"/",children:Object(m.jsx)("img",{src:Y,alt:"home",className:"indicator-name__img"})})}),Object(m.jsx)("div",{className:"indicator-name__arrow",children:"<"}),Object(m.jsx)(r.b,{to:"/".concat(c.toLowerCase()),className:"indicator-name__title",children:c}),t&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"indicator-name__arrow",children:"<"}),Object(m.jsx)("div",{className:"indicator-name__title",children:t})]})]})}),Z=(c(59),function(e){var t=e.text,c=e.value;return Object(m.jsxs)("div",{className:"product-details-description__text-container",children:[Object(m.jsx)("div",{className:"description-text-template",children:t}),Object(m.jsx)("div",{className:"description-value-template",children:c})]})}),W=function(e){var t=e.productInfo,c=e.specs,a=function(e){switch(e){case"Screen":return t.screen;case"Resolution":return t.resolution;case"Processor":return t.processor;case"RAM":return t.ram;case"Built in memory":return t.capacity;case"Camera":return t.camera;case"Zoom":return t.zoom;case"Cell":return t.cell.join(" ");default:return""}};return Object(m.jsx)(m.Fragment,{children:c.map((function(e){return Object(m.jsx)(Z,{text:e.label,value:a(e.label)},e.label)}))})},G=c(17),K=Object(G.b)({name:"productInfo",initialState:{productInfo:null,selectedCapacity:null,selectedColor:null},reducers:{setProduct:function(e,t){e.productInfo=t.payload},setCapacity:function(e,t){e.selectedCapacity=t.payload},setColor:function(e,t){e.selectedColor=t.payload}}}),z=K.reducer,$=K.actions,ee=$.setProduct,te=$.setCapacity,ce=$.setColor,ae=function(){var e=N(),t=y((function(e){return e.products})).products,c=y((function(e){return e.productInfo})),a=c.productInfo,n=c.selectedCapacity,s=c.selectedColor,i=Object(u.useState)(!1),o=Object(h.a)(i,2),l=o[0],d=o[1],j=Object(u.useState)(!1),b=Object(h.a)(j,2),p=b[0],O=b[1],_=Object(u.useState)(C+(null===a||void 0===a?void 0:a.images[0])),v=Object(h.a)(_,2),x=v[0],k=v[1],S=t.find((function(e){return e.phoneId===(null===a||void 0===a?void 0:a.id)})),w=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]};return Object(u.useEffect)((function(){k(C+(null===a||void 0===a?void 0:a.images[0]));var e=t.find((function(e){return e.phoneId===(null===a||void 0===a?void 0:a.id)}));if(e){var c=w("favourites");O(c.some((function(t){return t.id===e.id})));var n=w("cart");d(n.some((function(t){return t.id===e.id})))}}),[a,t]),a?Object(m.jsxs)("section",{className:"product-info__row",children:[Object(m.jsx)("div",{className:" product-info__column product-details product-info__column_small ",children:a.images.map((function(e){return Object(m.jsx)("div",{className:"product-details__image",onClick:function(t){return function(e,t){null===e||void 0===e||e.preventDefault(),k(t)}(t,C+e)},children:Object(m.jsx)("button",{className:"product-details__image-link",type:"button",children:Object(m.jsx)("img",{src:C+e,alt:"ProductSmallImage",className:"product-details__small-img"})})},e)}))}),Object(m.jsx)("div",{className:"product-info__column",children:Object(m.jsx)("div",{className:"product-info__main-image",children:Object(m.jsx)("div",{className:"product-info__main-image-link",children:Object(m.jsx)("img",{src:x,alt:"MainProductImage",className:"product-info__main-img"})})})}),Object(m.jsxs)("div",{className:"product-info__column product-details-description",children:[Object(m.jsx)("div",{className:"product-details-description__subtitle",children:"Available colors"}),Object(m.jsx)("div",{className:"product-details-description__colors",children:a.colorsAvailable.map((function(t){return Object(m.jsx)(r.b,{to:"/phones/".concat(a.namespaceId,"-").concat(a.capacity.toLowerCase(),"-").concat(t.toLowerCase()),className:f()("product-details-description__color",{"active-color":s===t}),style:{backgroundColor:"midnightgreen"===t?"#004953":t},onClick:function(){return e(ce(t))}},t)}))}),Object(m.jsx)("div",{className:"product-details-description__subtitle",children:"Select capacity"}),Object(m.jsx)("div",{className:"product-details-description__capacity",children:a.capacityAvailable.map((function(t){return Object(m.jsx)(r.b,{to:"/phones/".concat(a.namespaceId,"-").concat(t.toLowerCase(),"-").concat(a.color),className:f()("product-details-description__capacity-available",{"active-capacity":n===t}),onClick:function(){return e(te(t))},children:t},t)}))}),Object(m.jsxs)("div",{className:"prices",children:[Object(m.jsxs)("div",{className:"prices__discount",children:["$",a.priceDiscount]}),Object(m.jsxs)("div",{className:"prices__full-price",children:["$",a.priceRegular]})]}),Object(m.jsxs)("div",{className:"product-details-description__footer",children:[Object(m.jsx)("button",{type:"button",className:f()({"card-button-template":!0,"product-details-description__card":!0,"is-active":l}),onClick:function(){var e=localStorage.getItem("cart"),t=e?JSON.parse(e):[];S&&!t.some((function(e){return e.id===S.id}))&&(t.push(Object(U.a)(Object(U.a)({},S),{},{quantity:1})),d(!0),localStorage.setItem("cart",JSON.stringify(t)),window.dispatchEvent(new Event("cartUpdated")))},children:l?"Added to cart":"Add to cart"}),Object(m.jsx)("button",{type:"button",className:"card-button-template__like",onClick:function(){var e=localStorage.getItem("favourites"),c=e?JSON.parse(e):[],n=t.find((function(e){return e.phoneId===(null===a||void 0===a?void 0:a.id)}));if(n){var r=c.findIndex((function(e){return e.id===n.id}));-1===r?(c.push(n),O(!0)):(c.splice(r,1),O(!1)),localStorage.setItem("favourites",JSON.stringify(c)),window.dispatchEvent(new Event("favouritesUpdated"))}},style:{backgroundColor:"#fff"},children:Object(m.jsx)("img",{src:p?T:g,alt:"ProductImage",className:"card-button-template__favourite"})})]}),Object(m.jsx)(W,{productInfo:a,specs:[{key:"screen",label:"Screen"},{key:"resolution",label:"Resolution"},{key:"processor",label:"Processor"},{key:"ram",label:"RAM"}]})]}),Object(m.jsxs)("div",{className:" product-info__column product-details product-info__column_small ",children:["ID:"," ",a.namespaceId]})]}):null},ne=(c(62),function(){return Object(m.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(m.jsx)("div",{className:"Loader__content"})})}),re=function(){var e=Object(j.o)();return Object(m.jsxs)("div",{className:"product-info__back back-to-page",children:[Object(m.jsx)("button",{type:"button",onClick:function(){return e(-1)},className:"back-to-page__link","data-cy":"backButton",children:"<"}),Object(m.jsx)("button",{type:"button",onClick:function(){return e(-1)},className:"back-to-page__link","data-cy":"backButton",children:"Back"})]})},se=(c(63),function(e){var t=e.description;return Object(m.jsxs)("div",{className:"about-product__column column-product-about",children:[Object(m.jsx)("div",{className:"column-product-about__title",children:"About"}),t.description.map((function(e){return Object(m.jsxs)(d.a.Fragment,{children:[Object(m.jsx)("div",{className:"about-product__title",children:e.title}),Object(m.jsx)("div",{className:"about-product__text",children:e.text})]},e.title)}))]})}),ie=function(){var e=N(),t=y((function(e){return e.products})).products,c=y((function(e){return e.productInfo})).productInfo,a=Object(u.useState)(!0),n=Object(h.a)(a,2),r=n[0],s=n[1],o=Object(j.q)().productId;return Object(u.useEffect)((function(){function t(){return(t=Object(i.a)(l.a.mark((function t(){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(!0),t.next=4,I("".concat(C,"products/").concat(o,".json"));case 4:c=t.sent,e(ee(c)),e(ce(c.color)),e(te(c.capacity)),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),new Error("Data could not be fetched");case 13:return t.prev=13,s(!1),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[o]),c?Object(m.jsx)("main",{className:"product-info",children:r?Object(m.jsx)(ne,{}):Object(m.jsxs)("div",{className:"product-info__container",children:[Object(m.jsx)(X,{productName:c.name,productType:"Phones"}),Object(m.jsx)(re,{}),Object(m.jsx)("div",{className:"product-info__title",children:c.name}),Object(m.jsx)(ae,{}),Object(m.jsx)("section",{"data-cy":"productDescription",className:"product-info__about about-product",children:Object(m.jsxs)("div",{className:"about-product__row",children:[Object(m.jsx)(se,{description:c}),Object(m.jsxs)("div",{className:"about-product__column column-product-about",children:[Object(m.jsx)("div",{className:"column-product-about__title",children:"Tech specs"}),Object(m.jsx)(W,{productInfo:c,specs:[{key:"screen",label:"Screen"},{key:"resolution",label:"Resolution"},{key:"processor",label:"Processor"},{key:"ram",label:"RAM"},{key:"capacity",label:"Built in memory"},{key:"camera",label:"Camera"},{key:"zoom",label:"Zoom"},{key:"cell",label:"Cell"}]})]})]})}),Object(m.jsx)(R,{title:"You may also like",products:Object(S.a)(t).sort((function(){return Math.random()-.5}))})]})}):r?Object(m.jsx)(ne,{}):Object(m.jsx)("div",{children:"somewthing went wrong"})},oe=(c(64),c(65),function(e){var t=e.category;return Object(m.jsx)("div",{className:"results-not-found bg-blue-500",children:"cart"===t?"Your cart is empty":"".concat(t," not found")})}),le=function(){var e=y((function(e){return e.user})).user,t=null===e||void 0===e?void 0:e.id,c=localStorage.getItem("favourites-".concat(t)),a=c?JSON.parse(c):[],n=Object(u.useState)(a),s=Object(h.a)(n,1)[0],i=Object(r.d)(),o=Object(h.a)(i,1)[0].get("query"),l=Object(u.useMemo)((function(){return s.filter((function(e){return null===o||""===o||e.name.toLowerCase().includes(o.toLowerCase())}))}),[s,o]);return Object(m.jsx)("main",{className:"phones-page",children:Object(m.jsxs)("div",{className:"phones-page__container",children:[Object(m.jsx)(X,{productType:"Favourites"}),Object(m.jsx)("div",{className:"phones-page__title",children:"Favourites"}),Object(m.jsxs)("div",{className:"phones-page__subtitle",children:[l.length," ","models"]}),l.length>0?Object(m.jsx)("div",{className:"phones-page__row",children:l.map((function(e){return Object(m.jsx)(q,{card:e},e.id)}))}):Object(m.jsx)(oe,{category:"favourites"})]})})},ue=c(40),de=c(39),je=(c(68),function(e){var t=e.phone,c=e.handleDeleteClick,a=e.updateCart,n=t.image,r=t.name,s=t.price,i=t.quantity,o=Object(u.useState)(i||1),l=Object(h.a)(o,2),d=l[0],j=l[1],b=y((function(e){return e.user})).user,p=null===b||void 0===b?void 0:b.id;return Object(u.useEffect)((function(){var e=localStorage.getItem("cart-".concat(p)),c=(e?JSON.parse(e):[]).map((function(e){return e.id===t.id?Object(U.a)(Object(U.a)({},e),{},{quantity:d}):e}));localStorage.setItem("cart-".concat(p),JSON.stringify(c)),a(c)}),[d]),Object(m.jsx)("div",{className:"column-cart-description",children:Object(m.jsxs)("div",{className:"column-cart-description__content",children:[Object(m.jsx)("button",{type:"button",className:"column-cart-description__close",onClick:function(){return c(r)},"data-cy":"cartDeleteButton",children:Object(m.jsx)("div",{className:"fa-icon__cross",children:Object(m.jsx)(ue.a,{icon:de.a})})}),Object(m.jsx)("div",{className:"column-cart-description__image",children:Object(m.jsx)("img",{src:C+n,alt:"PhoneImage",className:"column-cart-description__img"})}),Object(m.jsx)("div",{className:"column-cart-description__title",children:r}),Object(m.jsxs)("div",{className:"column-cart-description__add-buttons",children:[Object(m.jsx)("button",{type:"button",className:f()({"column-cart-description__button":!0,"column-cart-description_remove":!0}),onClick:function(){d>1&&j((function(e){return e-1}))},children:"-"}),Object(m.jsx)("div",{className:"column-cart-description__count",children:d}),Object(m.jsx)("button",{type:"button",className:f()({"column-cart-description__button":!0,"column-cart-description_add":!0}),onClick:function(){d>=1&&j((function(e){return e+1}))},children:"+"})]}),Object(m.jsxs)("div",{className:"column-cart-description__price",children:["$",s*d]})]})})}),be=(c(69),function(){var e=y((function(e){return e.user})).user,t=null===e||void 0===e?void 0:e.id,c=localStorage.getItem("cart-".concat(t)),a=c?JSON.parse(c):[],n=Object(u.useState)(0),r=Object(h.a)(n,2),s=r[0],i=r[1],o=Object(u.useState)(0),l=Object(h.a)(o,2),d=l[0],j=l[1],b=Object(u.useState)(a),p=Object(h.a)(b,2),O=p[0],g=p[1],_=Object(u.useState)(!1),v=Object(h.a)(_,2),x=v[0],N=v[1],k=null;Object(u.useEffect)((function(){return function(){k&&clearTimeout(k)}}),[]);var S=function(e){g(e),localStorage.setItem("cart-".concat(t),JSON.stringify(e)),function(e){var t=e.reduce((function(e,t){return e+t.price*(t.quantity||1)}),0),c=e.reduce((function(e,t){return e+(t.quantity||1)}),0);i(t),j(c)}(e)},w=function(e){var t=O.filter((function(t){return t.name!==e}));S(t),window.dispatchEvent(new Event("cartUpdated"))};return Object(m.jsx)("main",{className:"cart-page",children:Object(m.jsxs)("div",{className:"cart-page__container",children:[Object(m.jsx)(re,{}),Object(m.jsx)("div",{className:"cart-page__title",children:"Cart"}),O.length>0?Object(m.jsxs)("div",{className:"cart-page__row",children:[Object(m.jsx)("div",{className:"cart-page__column cart-page__column_big",children:O.map((function(e){return Object(m.jsx)(je,{phone:e,handleDeleteClick:w,updateCart:S},e.id)}))}),Object(m.jsxs)("div",{className:f()({"cart-page__column":!0,"cart-page__column_small":!0,"column-cart":!0}),children:[Object(m.jsxs)("div",{className:"column-cart__content",children:[Object(m.jsx)("div",{className:"column-cart__price",children:"$".concat(s)}),Object(m.jsx)("div",{"data-cy":"productQauntity",className:"column-cart__quantity",children:"Total for ".concat(d," items")}),Object(m.jsx)("button",{type:"button",className:"column-cart__checkout",onClick:function(){N(!0),k=setTimeout((function(){N(!1)}),3e3)},children:"Checkout"})]}),x&&Object(m.jsx)("div",{className:"column-cart__content feature-message",children:"We are sorry, but this feature is not implemented yet"})]})]}):Object(m.jsx)(oe,{category:"cart"})]})})}),me=function(){var e=Object(j.m)().pathname;return Object(u.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[e]),null},pe=(c(33),c(70),function(e){var t=e.totalPages,c=e.currentPage,a=e.handlePageChange,n=e.category,r=[],s=c-1,i=c+1;c<=3?i=(s=1)+4:c>=t-2&&(s=(i=t)-4),s>2?r.push(1,"..."):r.push(1,2);for(var o=s;o<=i;o+=1)1!==o&&2!==o&&r.push(o);return i<t-1?r.push("...",t):i===t-1&&r.push(t),Object(m.jsxs)("div",{"data-cy":"pagination",className:"".concat(n,"-page__pagination pagination"),children:[Object(m.jsx)("button",{type:"button",onClick:function(){return a(c-1)},disabled:1===c,className:"pagination__button pagination_button_l","data-cy":"paginationLeft",children:"<"}),r.map((function(e,t){return"number"===typeof e?Object(m.jsx)("button",{type:"button",onClick:function(){return a(e)},className:f()("pagination__button",{active:c===e}),children:e},"".concat(e,"_").concat(t)):Object(m.jsx)("div",{className:"dots",children:"..."},"".concat(e,"_").concat(t))})),Object(m.jsx)("button",{type:"button",onClick:function(){return a(c+1)},disabled:c===t,className:"pagination__button pagination_button_r","data-cy":"paginationRight",children:">"})]})}),he=(c(71),function(e){var t=e.category,c=e.onChange,a=e.value;return"age"===e.sortBy?Object(m.jsxs)("div",{className:"".concat(t,"-page__sort-by"),children:[Object(m.jsx)("label",{className:"".concat(t,"-page__label"),htmlFor:"sort-by",children:"Sort by:"}),Object(m.jsxs)("select",{className:"".concat(t,"-page__select"),id:"sort-by",name:"sort-by",onChange:c,value:a,children:[Object(m.jsx)("option",{value:"age",children:"Newest"}),Object(m.jsx)("option",{value:"price",children:"Cheapest"}),Object(m.jsx)("option",{value:"name",children:"Alphabetically"})]})]}):Object(m.jsxs)("div",{className:"".concat(t,"-page__items-per-page"),children:[Object(m.jsx)("label",{className:"".concat(t,"-page__label"),htmlFor:"items-per-page",children:"Items per page:"}),Object(m.jsxs)("select",{className:"".concat(t,"-page__select"),id:"items-per-page",name:"items-per-page",onChange:c,value:a,children:[Object(m.jsx)("option",{value:"4",children:"4"}),Object(m.jsx)("option",{value:"8",children:"8"}),Object(m.jsx)("option",{value:"16",children:"16"}),Object(m.jsx)("option",{value:"All",children:"All"})]})]})}),Oe=function(){var e="phones",t=y((function(e){return e.products})).products,c=Object(r.d)(),a=Object(h.a)(c,2),n=a[0],s=a[1],i=n.get("perPage")||"4",o=n.get("sort")||"age",l=n.get("query"),d=Number(n.get("page")||"1"),j=Object(u.useState)(d),b=Object(h.a)(j,2),p=b[0],O=b[1],f=Object(u.useCallback)((function(e){var t=e.target.value;n.set("sort",t),s(n)}),[n,s]),g=Object(u.useCallback)((function(e){var t=e.target.value;n.set("perPage",t),n.set("page","1"),s(n),O(1)}),[n,s]),_=Object(u.useCallback)((function(e){O(e),s(M(n,{page:e.toString()}))}),[n,s]),v=Object(u.useCallback)((function(e){if("All"===i)return e;var t=(p-1)*parseInt(i,10);return e.slice(t,t+parseInt(i,10))}),[i,p]),x=Object(u.useMemo)((function(){return t.filter((function(t){return t.category===e&&(null===l||""===l||t.name.toLowerCase().includes(l.toLowerCase()))}))}),[t,l,e]),N=Object(u.useMemo)((function(){return B(x,n.get("sort")||"age")}),[x,n]),k=Object(u.useMemo)((function(){return v(N)}),[v,N]),S=Object(u.useMemo)((function(){return"All"===i?1:Math.ceil(N.length/parseInt(i,10))}),[i,N]);return Object(u.useEffect)((function(){n.get("sort")||s(M(n,{sort:"age"}))}),[]),Object(u.useEffect)((function(){p!==d&&O(d)}),[d]),Object(m.jsx)("main",{className:"".concat(e,"-page"),children:Object(m.jsxs)("div",{className:"".concat(e,"-page__container"),children:[Object(m.jsx)(X,{productType:e}),Object(m.jsx)("h1",{className:"".concat(e,"-page__title"),children:e.slice(0,1).toUpperCase()+e.slice(1)}),Object(m.jsx)("p",{className:"".concat(e,"-page__subtitle"),children:"".concat(N.length," models")}),N.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"".concat(e,"-page__navigation-filter"),children:[Object(m.jsx)(he,{category:e,onChange:f,value:o,sortBy:"age"}),Object(m.jsx)(he,{category:e,onChange:g,value:i,sortBy:"page"})]}),Object(m.jsx)("div",{"data-cy":"productList",className:"".concat(e,"-page__row"),children:null===k||void 0===k?void 0:k.map((function(e){return Object(m.jsx)(q,{card:e},e.id)}))}),"All"!==i&&Object(m.jsx)(pe,{totalPages:S,currentPage:p,handlePageChange:_,category:e})]}):Object(m.jsx)(oe,{category:e})]})})},fe=function(){var e="tablets",t=y((function(e){return e.products})).products,c=Object(r.d)(),a=Object(h.a)(c,2),n=a[0],s=a[1],i=n.get("perPage")||"4",o=n.get("sort")||"age",l=n.get("query"),d=Number(n.get("page")||"1"),j=Object(u.useState)(d),b=Object(h.a)(j,2),p=b[0],O=b[1],f=Object(u.useCallback)((function(e){var t=e.target.value;n.set("sort",t),s(n)}),[n,s]),g=Object(u.useCallback)((function(e){var t=e.target.value;n.set("perPage",t),n.set("page","1"),s(n),O(1)}),[n,s]),_=Object(u.useCallback)((function(e){O(e),s(M(n,{page:e.toString()}))}),[n,s]),v=Object(u.useCallback)((function(e){if("All"===i)return e;var t=(p-1)*parseInt(i,10);return e.slice(t,t+parseInt(i,10))}),[i,p]),x=Object(u.useMemo)((function(){return t.filter((function(t){return t.category===e&&(null===l||""===l||t.name.toLowerCase().includes(l.toLowerCase()))}))}),[t,l,e]),N=Object(u.useMemo)((function(){return B(x,n.get("sort")||"age")}),[x,n]),k=Object(u.useMemo)((function(){return v(N)}),[v,N]),S=Object(u.useMemo)((function(){return"All"===i?1:Math.ceil(N.length/parseInt(i,10))}),[i,N]);return Object(u.useEffect)((function(){n.get("sort")||s(M(n,{sort:"age"}))}),[]),Object(u.useEffect)((function(){p!==d&&O(d)}),[d]),Object(m.jsx)("main",{className:"".concat(e,"-page"),children:Object(m.jsxs)("div",{className:"".concat(e,"-page__container"),children:[Object(m.jsx)(X,{productType:e}),Object(m.jsx)("h1",{className:"".concat(e,"-page__title"),children:e.slice(0,1).toUpperCase()+e.slice(1)}),Object(m.jsx)("p",{className:"".concat(e,"-page__subtitle"),children:"".concat(N.length," models")}),N.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"".concat(e,"-page__navigation-filter"),children:[Object(m.jsx)(he,{category:e,onChange:f,value:o,sortBy:"age"}),Object(m.jsx)(he,{category:e,onChange:g,value:i,sortBy:"page"})]}),Object(m.jsx)("div",{"data-cy":"productList",className:"".concat(e,"-page__row"),children:null===k||void 0===k?void 0:k.map((function(e){return Object(m.jsx)(q,{card:e},e.id)}))}),"All"!==i&&Object(m.jsx)(pe,{totalPages:S,currentPage:p,handlePageChange:_,category:e})]}):Object(m.jsx)(oe,{category:e})]})})},ge=function(){var e="accessories",t=y((function(e){return e.products})).products,c=Object(r.d)(),a=Object(h.a)(c,2),n=a[0],s=a[1],i=n.get("perPage")||"4",o=n.get("sort")||"age",l=n.get("query"),d=Number(n.get("page")||"1"),j=Object(u.useState)(d),b=Object(h.a)(j,2),p=b[0],O=b[1],f=Object(u.useCallback)((function(e){var t=e.target.value;n.set("sort",t),s(n)}),[n,s]),g=Object(u.useCallback)((function(e){var t=e.target.value;n.set("perPage",t),n.set("page","1"),s(n),O(1)}),[n,s]),_=Object(u.useCallback)((function(e){O(e),s(M(n,{page:e.toString()}))}),[n,s]),v=Object(u.useCallback)((function(e){if("All"===i)return e;var t=(p-1)*parseInt(i,10);return e.slice(t,t+parseInt(i,10))}),[i,p]),x=Object(u.useMemo)((function(){return t.filter((function(t){return t.category===e&&(null===l||""===l||t.name.toLowerCase().includes(l.toLowerCase()))}))}),[t,l,e]),N=Object(u.useMemo)((function(){return B(x,n.get("sort")||"age")}),[x,n]),k=Object(u.useMemo)((function(){return v(N)}),[v,N]),S=Object(u.useMemo)((function(){return"All"===i?1:Math.ceil(N.length/parseInt(i,10))}),[i,N]);return Object(u.useEffect)((function(){n.get("sort")||s(M(n,{sort:"age"}))}),[]),Object(u.useEffect)((function(){p!==d&&O(d)}),[d]),Object(m.jsx)("main",{className:"".concat(e,"-page"),children:Object(m.jsxs)("div",{className:"".concat(e,"-page__container"),children:[Object(m.jsx)(X,{productType:e}),Object(m.jsx)("h1",{className:"".concat(e,"-page__title"),children:e.slice(0,1).toUpperCase()+e.slice(1)}),Object(m.jsx)("p",{className:"".concat(e,"-page__subtitle"),children:"".concat(N.length," models")}),N.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"".concat(e,"-page__navigation-filter"),children:[Object(m.jsx)(he,{category:e,onChange:f,value:o,sortBy:"age"}),Object(m.jsx)(he,{category:e,onChange:g,value:i,sortBy:"page"})]}),Object(m.jsx)("div",{"data-cy":"productList",className:"".concat(e,"-page__row"),children:null===k||void 0===k?void 0:k.map((function(e){return Object(m.jsx)(q,{card:e},e.id)}))}),"All"!==i&&Object(m.jsx)(pe,{totalPages:S,currentPage:p,handlePageChange:_,category:e})]}):Object(m.jsx)(oe,{category:e})]})})},_e=function(){return Object(m.jsx)("main",{className:"phones-page",children:Object(m.jsx)("div",{className:"phones-page__container",children:Object(m.jsx)("p",{children:"Page not found"})})})},ve=Object(G.b)({name:"products",initialState:{products:[]},reducers:{set:function(e,t){e.products=t.payload}}}),xe=ve.reducer,Ne=ve.actions.set,ye="https://mate.academy/students-api";function ke(e){return new Promise((function(t){setTimeout(t,e)}))}function Se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:t};return c&&(a.body=JSON.stringify(c),a.headers={"Content-Type":"application/json; charset=UTF-8"}),ke(300).then((function(){return fetch(ye+e,a)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var we=function(e){return Se(e)},Ce=function(e,t){return Se(e,"POST",t)},Ae=function(){var e=Object(i.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we("/users?email=".concat(t));case 2:return c=e.sent,e.abrupt("return",c[0]||null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(i.a)(l.a.mark((function e(t){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.email,a=t.name,e.abrupt("return",Ce("/users",{email:c,name:a}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=Object(G.b)({name:"user",initialState:{user:null,loading:!1,error:null},reducers:{setUser:function(e,t){e.user=t.payload},setLoading:function(e,t){e.loading=t.payload},setError:function(e,t){e.error=t.payload}}}),Pe=Ee.reducer,Le=Ee.actions,Me=Le.setUser,Be=(Le.setLoading,Le.setError,function(){var e=N(),t=Object(u.useState)(""),c=Object(h.a)(t,2),a=c[0],n=c[1],r=Object(u.useState)(""),s=Object(h.a)(r,2),o=s[0],d=s[1],j=Object(u.useState)(!1),b=Object(h.a)(j,2),p=b[0],O=b[1],g=Object(u.useState)(!1),_=Object(h.a)(g,2),v=_[0],x=_[1],y=Object(u.useState)(""),k=Object(h.a)(y,2),S=k[0],w=k[1],C=function(t){localStorage.setItem("user",JSON.stringify(t)),e(Me(t))};Object(u.useEffect)((function(){var t=localStorage.getItem("user");if(t)try{var c=JSON.parse(t);e(Me(c))}catch(a){throw new Error("".concat(a,": couldn't handle the request"))}}),[]);var A=function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(a);case 2:(t=e.sent)?C(t):O(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),w(""),x(!0),e.prev=3,!p){e.next=9;break}return e.next=7,Ie({name:o,email:a}).then(C);case 7:e.next=11;break;case 9:return e.next=11,A();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),w("Something went wrtong");case 16:return e.prev=16,x(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("form",{onSubmit:I,className:"box mt-5",children:[Object(m.jsx)("h1",{className:"title is-3",children:p?"You need to register":"Log in to open the source"}),Object(m.jsxs)("div",{className:"field",children:[Object(m.jsx)("label",{className:"label",htmlFor:"user-email",children:"Email"}),Object(m.jsxs)("div",{className:f()("control has-icons-left",{"is-loading":v}),children:[Object(m.jsx)("input",{type:"email",id:"user-email",className:f()("input",{"is-danger":!p&&S}),placeholder:"Enter your email",disabled:v||p,value:a,required:!0,onChange:function(e){return n(e.target.value)}}),Object(m.jsx)("span",{className:"icon is-small is-left",children:Object(m.jsx)("i",{className:"fas fa-envelope"})})]}),!p&&S&&Object(m.jsx)("p",{className:"help is-danger",children:S})]}),p&&Object(m.jsxs)("div",{className:"field",children:[Object(m.jsx)("label",{className:"label",htmlFor:"user-name",children:"Your Name"}),Object(m.jsxs)("div",{className:f()("control has-icons-left",{"is-loading":v}),children:[Object(m.jsx)("input",{type:"text",id:"user-name",className:f()("input",{"is-danger":p&&S}),placeholder:"Enter your name",required:!0,minLength:4,disabled:v,value:o,onChange:function(e){return d(e.target.value)}}),Object(m.jsx)("span",{className:"icon is-small is-left",children:Object(m.jsx)("i",{className:"fas fa-user"})})]}),p&&S&&Object(m.jsx)("p",{className:"help is-danger",children:S})]}),Object(m.jsx)("div",{className:"field",children:Object(m.jsx)("button",{type:"submit",className:f()("button is-primary",{"is-loading":v}),children:p?"Register":"Login"})})]})}),Je=function(){var e=N(),t=y((function(e){return e.user})).user;return Object(u.useEffect)((function(){function t(){return(t=Object(i.a)(l.a.mark((function t(){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P(w);case 3:c=t.sent,e(Ne(c)),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error("Data could not be fetched");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),t?Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(me,{}),Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)(k,{}),Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{path:"/",element:Object(m.jsx)(H,{})}),Object(m.jsxs)(j.b,{path:"phones",children:[Object(m.jsx)(j.b,{index:!0,element:Object(m.jsx)(Oe,{})}),Object(m.jsx)(j.b,{path:":productId",element:Object(m.jsx)(ie,{})})]}),Object(m.jsxs)(j.b,{path:"tablets",children:[Object(m.jsx)(j.b,{index:!0,element:Object(m.jsx)(fe,{})}),Object(m.jsx)(j.b,{path:":productId",element:Object(m.jsx)(ie,{})})]}),Object(m.jsxs)(j.b,{path:"accessories",children:[Object(m.jsx)(j.b,{index:!0,element:Object(m.jsx)(ge,{})}),Object(m.jsx)(j.b,{path:":productId",element:Object(m.jsx)(ie,{})})]}),Object(m.jsx)(j.b,{path:"favourites",element:Object(m.jsx)(le,{})}),Object(m.jsx)(j.b,{path:"cart",element:Object(m.jsx)(be,{})}),Object(m.jsx)(j.b,{path:"*",element:Object(m.jsx)(_e,{})}),Object(m.jsx)(j.b,{path:"home",element:Object(m.jsx)(j.a,{to:"/",replace:!0})})]}),Object(m.jsx)(p,{})]})]}):Object(m.jsx)(Be,{})},Ue=Object(G.a)({reducer:{products:xe,productInfo:z,user:Pe}});n.a.render(Object(m.jsx)(s.a,{store:Ue,children:Object(m.jsx)(r.a,{children:Object(m.jsx)(Je,{})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.9fbe03c7.chunk.js.map