(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{33:function(e,t,c){},51:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){"use strict";c.r(t);var a=c(26),n=c.n(a),r=c(7),s=c(24),i=c(8),o=c(3),l=c(5),u=c.n(l),d=c(1),j=c.n(d),b=c(4),m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAYCAYAAACIhL/AAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKySURBVHgB7VWxctpAEN09bHCoaBJE4kxwl85SMhh3wX+AvyBQpgL/AZSpgv8AynSkcxeqjCFjOJepIheekE5lmAza7ElIOiGUTIoUmdGbuZnj7und7du9BSBDhgwZ/inQtOof/Rk4cj493yZYlnVMmO8CQQMRqkTkMFkC0VDK2UjnmqZZBVHoMLf5t1y1RgSTbS5aL+q0mduL+fQoLlLroBADSIEvuDqXUjpeILA/QcTSTi64Azn/fOHrnrxmQwapXAIOanWmdHOVymFvs+4sv91fRs6dHPPlxtpnDiBes7DNP6pedCpyFAdG+dEXwMIVH2ikcgFPjcoTMMoP71DsqUAOAi7rXDF/qekagLnnfJ/3e5DmDuAAwzmNwS22pZw4ngMv6x0kGPgHiy47ZwdpYtjkFq3dXOiSyJvhIQiS1sWzRcBlZ1HgcBNQ07Jqr0TaBfnARjinvW5woIK8mV566Q32tTIgsW4nuHk88oew+JKhLri5ZozLtcf1No60wNzpoGmeVpVvgSOLxae7ZARe+pLL6/xXX6PW4Zt3vcUVaYSo7nbqAkkmNf0plnY6KOW17dWRjyq/uGQxU5hS0LiMn/66wJJK+/bQJVSdJ3QBIw6Sk5piIm4PAUThnb7n1YpWAlyvUVpADPhFP5PzWZ+7AgK5De1Tm70cat8N9eBVzXEJtML7uftjvc2o521rYup1mbE9ZPsJq7F14AfgrvooVGr99G101CjFuEgtdLmFYBT8b3SH3JfbMQdjqVAvDKgX2+Pa0EWYMwH3QV/1K9XIN5cKdBrxA6knb2ajxWJ2Sy61/qArWdfrmbnK48OGV/CJ4U64sb41yk9H/LvE1it3SkGPYzfUgRfLpf1DCS2X99+Z+8Hj+v3JCLkC2/yaw38H5t6GuttcX/dNoJshQ4b/Hb8AfRtUwmKpBawAAAAASUVORK5CYII=",p=(c(51),c(0)),h=function(){return Object(p.jsx)("footer",{className:"footer",children:Object(p.jsxs)("div",{className:"footer__container",children:[Object(p.jsx)("div",{className:"footer__logo-link",children:Object(p.jsx)(r.b,{className:"footer__link",to:"home",children:Object(p.jsx)("img",{src:m,alt:"logo"})})}),Object(p.jsxs)("div",{className:"footer__links",children:[Object(p.jsx)("a",{className:"footer__link",href:"https://github.com/Blenemy",target:"blank",children:"Github"}),Object(p.jsx)("a",{className:"footer__link",href:"https://github.com/Blenemy",target:"blank",children:"Contacts"}),Object(p.jsx)("a",{className:"footer__link",href:"https://github.com/Blenemy",target:"blank",children:"Rights"})]}),Object(p.jsx)("div",{className:"footer__back-to-top",children:Object(p.jsx)("a",{className:"footer__link_back-to-top",href:"/",onClick:function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},children:"Back to top"})})]})})},O=c(9),f=c.n(O);var g=c.p+"static/media/favourites.3639e3e4.svg",_=c.p+"static/media/Cart.08d4be14.svg",v=c.p+"static/media/search.66a1fd86.svg",x=c.p+"static/media/Union.2063b2da.svg",N=(c(53),function(){return Object(s.b)()}),y=s.c,k=function(){var e=Object(r.d)(),t=Object(o.a)(e,2),c=t[0],a=t[1],n=Object(b.m)(),s=c.get("query"),i=Object(d.useState)(s||""),l=Object(o.a)(i,2),u=l[0],j=l[1],h=Object(d.useState)(0),O=Object(o.a)(h,2),N=O[0],k=O[1],S=Object(d.useState)(0),w=Object(o.a)(S,2),C=w[0],A=w[1],I=Object(d.useState)(u),E=Object(o.a)(I,2),P=E[0],L=E[1],B=function(e,t){var c=Object(d.useState)(e),a=Object(o.a)(c,2),n=a[0],r=a[1];return Object(d.useEffect)((function(){var c=setTimeout((function(){r(e)}),t);return function(){clearTimeout(c)}}),[e,t]),n}(P,300),M=Object(d.useRef)(null),J=y((function(e){return e.user})).user,U=null===J||void 0===J?void 0:J.id,T="/favourites"===n.pathname||"/phones"===n.pathname||"/tablets"===n.pathname||"/accessories"===n.pathname;return Object(d.useEffect)((function(){var e=function(){var e=localStorage.getItem("favourites-".concat(U)),t=localStorage.getItem("cart-".concat(U));null!==e&&k(JSON.parse(e).length),null!==t&&A(JSON.parse(t).length)};return e(),window.addEventListener("favouritesUpdated",e),window.addEventListener("cartUpdated",e),function(){window.removeEventListener("favouritesUpdated",e),window.removeEventListener("cartUpdated",e)}}),[]),Object(d.useEffect)((function(){j(s||"")}),[s]),Object(d.useEffect)((function(){var e=function(e,t){var c=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];null===n?c.delete(a):Array.isArray(n)?(c.delete(a),n.forEach((function(e){c.append(a,e)}))):c.set(a,n)})),c.toString()}(c,{query:B||null});a(new URLSearchParams(e))}),[B]),Object(p.jsx)("header",{className:"homepage-header",children:Object(p.jsxs)("nav",{className:"navigation-header bg-red-200",children:[Object(p.jsx)("div",{className:"navigation-header__left",children:Object(p.jsxs)("ul",{className:"navigation-header__list navigation-header__list_left",children:[Object(p.jsx)("li",{className:"navigation-header__item logo",children:Object(p.jsx)(r.b,{to:"home",className:"navigation-header__link",children:Object(p.jsx)("img",{className:"navigation-header__image",src:m,alt:"logo"})})}),Object(p.jsx)("li",{className:"navigation-header__item_l",children:Object(p.jsx)(r.c,{to:"/",className:function(e){var t=e.isActive;return f()("navigation-header__link",{"is-active-link":t})},children:"Home"})}),Object(p.jsx)("li",{className:"navigation-header__item_l",children:Object(p.jsx)(r.c,{to:"/phones",className:function(e){var t=e.isActive;return f()("navigation-header__link",{"is-active-link":t})},children:"Phones"})}),Object(p.jsx)("li",{className:"navigation-header__item_l",children:Object(p.jsx)(r.c,{to:"/tablets",className:function(e){var t=e.isActive;return f()("navigation-header__link",{"is-active-link":t})},children:"Tablets"})}),Object(p.jsx)("li",{className:"navigation-header__item_l",children:Object(p.jsx)(r.c,{to:"/accessories",className:function(e){var t=e.isActive;return f()("navigation-header__link",{"is-active-link":t})},children:"Accessories"})})]})}),Object(p.jsx)("div",{className:"navigation-header__right",children:Object(p.jsxs)("ul",{className:"navigation-header__list navigation-header__list_right",children:[T&&Object(p.jsxs)("li",{className:f()({"navigation-header__item":!0,"navigation-header__item_input":!0}),children:[Object(p.jsx)("input",{"data-cy":"NameFilter",type:"text",className:"navigation-header__input",placeholder:"Search in ".concat(n.pathname.substring(1),"..."),value:u,ref:M,onChange:function(e){var t;t=e.target.value,j(t),L(t)}}),u?Object(p.jsx)("button",{className:"navigation-header__clear-button input-button",onClick:function(){j(""),c.delete("query"),a(new URLSearchParams(c.toString()))},type:"button",children:Object(p.jsx)("img",{src:x,alt:"clearButton"})}):Object(p.jsx)("button",{className:"navigation-header__search-button input-button",onClick:function(){M.current&&M.current.focus()},type:"button",children:Object(p.jsx)("img",{src:v,alt:"search"})})]}),Object(p.jsxs)("li",{className:"navigation-header__item",children:[Object(p.jsx)(r.b,{to:"/favourites",className:"navigation-header__link",children:Object(p.jsx)("img",{className:"navigation-header__image",src:g,alt:"favorites"})}),Object(p.jsx)("div",{className:"navigation-header__count",children:N})]}),Object(p.jsxs)("li",{className:"navigation-header__item",children:[Object(p.jsx)(r.b,{to:"/cart",className:"navigation-header__link",children:Object(p.jsx)("img",{className:"navigation-header__image",src:_,alt:"cart"})}),Object(p.jsx)("div",{className:"navigation-header__count",children:C})]})]})})]})})},S=c(10),w="https://mate-academy.github.io/react_phone-catalog/_new/products.json",C="https://mate-academy.github.io/react_phone-catalog/_new/";function A(e){return new Promise((function(t){return setTimeout(t,e)}))}function I(e){return E.apply(this,arguments)}function E(){return(E=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A(500).then((function(){return fetch(t)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return L.apply(this,arguments)}function L(){return(L=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A(500).then((function(){return fetch(t)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=function(e,t){return Object.entries(t).forEach((function(t){var c=Object(o.a)(t,2),a=c[0],n=c[1];e.set(a,n)})),new URLSearchParams(e.toString())},M=function(e,t){switch(t){case"age":return Object(S.a)(e).sort((function(e,t){return+t.year-+e.year}));case"price":return Object(S.a)(e).sort((function(e,t){return e.price-t.price}));case"name":return Object(S.a)(e).sort((function(e,t){return e.name.localeCompare(t.name)}));default:return e}},J=(c(54),function(){var e=Object(d.useState)(0),t=Object(o.a)(e,2),c=t[0],a=t[1],n=["".concat(C,"img/banner-phones.png"),"".concat(C,"img/banner-tablets.png"),"".concat(C,"img/banner-accessories.png")];return Object(d.useEffect)((function(){var e=setInterval((function(){a((function(e){return 2===e?0:e+1}))}),5e3);return function(){clearInterval(e)}}),[c]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("section",{className:"main-slider",children:[Object(p.jsx)("button",{type:"button",className:"main-slider__button slider__button_l",onClick:function(){a((function(e){return 0===e?2:e-1}))},children:"<"}),Object(p.jsx)("div",{className:"main-slider__container",children:Object(p.jsx)("ul",{className:"main-slider__list",children:n.map((function(e,t){return Object(p.jsx)("li",{className:f()("main-slider__item",{active:t===c}),children:Object(p.jsx)("img",{src:e,alt:"",className:"main-slider__img"})},e)}))})}),Object(p.jsx)("button",{type:"button",className:"main-slider__button main-slider__button_r",onClick:function(){a((function(e){return 2===e?0:e+1}))},children:">"}),Object(p.jsx)("div",{className:"main-slider__indicators",children:n.map((function(e,t){return Object(p.jsx)("button",{type:"button",className:f()("main-slider__count",{active:t===c}),onClick:function(){return a(t)}},e)}))})]})})}),U=c(13),T=(c(55),c.p+"static/media/favourites-added.d1cb0efa.svg"),q=function(e){var t=e.card,c=y((function(e){return e.user})).user,a=null===c||void 0===c?void 0:c.id,n=Object(d.useState)(!1),s=Object(o.a)(n,2),i=s[0],l=s[1],u=Object(d.useState)(!1),j=Object(o.a)(u,2),b=j[0],m=j[1];Object(d.useEffect)((function(){var e=localStorage.getItem("favourites-".concat(a)),c=e?JSON.parse(e):[];m(c.some((function(e){return e.id===t.id})));var n=localStorage.getItem("cart-".concat(a)),r=n?JSON.parse(n):[];l(r.some((function(e){return e.id===t.id})))}),[t]);return Object(p.jsxs)("div",{"data-cy":"cardsContainer",className:"card",children:[Object(p.jsx)(r.b,{to:"/phones/".concat(t.itemId),className:"card__image",children:Object(p.jsx)("img",{src:C+t.image,alt:t.name,className:"card__img"})}),Object(p.jsxs)("div",{className:"card__body",children:[Object(p.jsx)("div",{className:"card__title",children:t.name}),Object(p.jsxs)("div",{className:"card__prices prices",children:[Object(p.jsxs)("div",{className:"prices__discount",children:["$",t.price]}),Object(p.jsxs)("div",{className:"prices__full-price",children:["$",t.fullPrice]})]}),Object(p.jsxs)("div",{className:"card__description",children:[Object(p.jsxs)("div",{className:"card__screen card-screen",children:[Object(p.jsx)("div",{className:"card-screen__left",children:"Screen:"}),Object(p.jsx)("div",{className:"card-screen__right",children:t.screen})]}),Object(p.jsxs)("div",{className:"card__capacity card-capacity",children:[Object(p.jsx)("div",{className:"card-capacity__left",children:"Capacity:"}),Object(p.jsx)("div",{className:"card-capacity__right",children:t.capacity})]}),Object(p.jsxs)("div",{className:"card__ram card-ram",children:[Object(p.jsx)("div",{className:"card-ram__left",children:"RAM:"}),Object(p.jsx)("div",{className:"card-ram__right",children:t.ram})]})]})]}),Object(p.jsxs)("div",{className:"card__footer",children:[Object(p.jsx)("button",{type:"button",className:f()({card__button:!0,"card-button-template":!0,"is-active":i}),onClick:function(e){null===e||void 0===e||e.preventDefault();var c=localStorage.getItem("cart-".concat(a)),n=c?JSON.parse(c):[];n.some((function(e){return e.id===t.id}))||(n.push(Object(U.a)(Object(U.a)({},t),{},{quantity:1})),l(!0)),localStorage.setItem("cart-".concat(a),JSON.stringify(n)),window.dispatchEvent(new Event("cartUpdated"))},children:i?"Added to cart":"Add to cart"}),Object(p.jsx)("button",{type:"button",className:"card-button-template__like",onClick:function(){var e=localStorage.getItem("favourites-".concat(a)),c=e?JSON.parse(e):[],n=c.findIndex((function(e){return e.id===t.id}));-1===n?(c.push(t),m(!0)):(c.splice(n,1),m(!1)),localStorage.setItem("favourites-".concat(a),JSON.stringify(c)),window.dispatchEvent(new Event("favouritesUpdated"))},"data-cy":"addToFavorite",children:Object(p.jsx)("img",{src:b?T:g,style:{backgroundColor:"#fff"},alt:"favourite",className:"card-button-template__favourite"})})]})]})},R=(c(56),j.a.memo((function(e){var t=e.title,c=e.products,a=Object(d.useState)(0),n=Object(o.a)(a,2),r=n[0],s=n[1],i=Object(d.useState)(0),l=Object(o.a)(i,2),u=l[0],j=l[1],b=c.length;return Object(p.jsxs)("div",{className:"product-slider",children:[Object(p.jsxs)("div",{className:"product-slider__header",children:[Object(p.jsx)("div",{className:"product-slider__title",children:t}),Object(p.jsxs)("div",{className:"product-slider__buttons",children:[Object(p.jsx)("button",{type:"button",className:"product-slider__prev product-slider__button",onClick:function(){u>0&&(j(u-1),s(r+288))},children:"<"}),Object(p.jsx)("button",{type:"button",className:"product-slider__next product-slider__button",onClick:function(){u<b-4&&(j(u+1),s(r-288))},children:">"})]})]}),Object(p.jsx)("div",{className:"product-slider__slider-container",children:Object(p.jsx)("div",{className:"product-slider__row",style:{transform:"translateX(".concat(r,"px)"),transition:"transform ease-out 0.45s"},children:c.map((function(e){return Object(p.jsx)(q,{card:e},e.id)}))})})]})}))),D=c.p+"static/media/phones-banner.76a1b179.png",F=c.p+"static/media/tablets-banner.3131a36e.png",Q=c.p+"static/media/accessories-banner.f97da0dc.png",V=(c(57),function(){var e=y((function(e){return e.products})).products,t=Object(d.useMemo)((function(){return Object(S.a)(e).filter((function(e){return"phones"===e.category}))}),[e]),c=Object(d.useMemo)((function(){return Object(S.a)(e).filter((function(e){return"tablets"===e.category}))}),[e]),a=Object(d.useMemo)((function(){return Object(S.a)(e).filter((function(e){return"accessories"===e.category}))}),[e]);return Object(p.jsx)("div",{"data-cy":"categoryLinksContainer",className:"shop-category",children:Object(p.jsxs)("div",{className:"shop-category__container",children:[Object(p.jsx)("div",{className:"shop-category__title",children:"Shop by category"}),Object(p.jsxs)("div",{className:"shop-category__row",children:[Object(p.jsxs)("div",{className:"shop-category__item item-shop-category",children:[Object(p.jsx)(r.b,{to:"/phones",className:"item-shop-category__image",children:Object(p.jsx)("img",{src:D,alt:"BannerImage",className:"item-shop-category__img"})}),Object(p.jsxs)("div",{className:"item-shop-category__body",children:[Object(p.jsx)("div",{className:"item-shop-category__title",children:"Mobile phones"}),Object(p.jsxs)("div",{className:"item-shop-category__description",children:[t.length," models"]})]})]}),Object(p.jsxs)("div",{className:"shop-category__item item-shop-category",children:[Object(p.jsx)(r.b,{to:"/tablets",className:"item-shop-category__image",children:Object(p.jsx)("img",{src:F,alt:"TabletsBannerImage",className:"item-shop-category__img"})}),Object(p.jsxs)("div",{className:"item-shop-category__body",children:[Object(p.jsx)("div",{className:"item-shop-category__title",children:"Tablets"}),Object(p.jsxs)("div",{className:"item-shop-category__description",children:[c.length," models"]})]})]}),Object(p.jsxs)("div",{className:"shop-category__item item-shop-category",children:[Object(p.jsx)(r.b,{to:"/accessories",className:"item-shop-category__image",children:Object(p.jsx)("img",{src:Q,alt:"AccessoriesBannerImage",className:"item-shop-category__img"})}),Object(p.jsxs)("div",{className:"item-shop-category__body",children:[Object(p.jsx)("div",{className:"item-shop-category__title",children:"Accessories"}),Object(p.jsxs)("div",{className:"item-shop-category__description",children:[a.length," models"]})]})]})]})]})})}),H=function(){var e=y((function(e){return e.products})).products,t=Object(d.useMemo)((function(){return Object(S.a)(e).sort((function(e,t){return t.fullPrice-t.price-(e.fullPrice-e.price)}))}),[e]),c=Object(d.useMemo)((function(){return Object(S.a)(e).sort((function(e,t){return t.price-e.price}))}),[e]);return Object(p.jsx)("main",{className:"homepage",children:Object(p.jsxs)("div",{className:"homepage__content",children:[Object(p.jsx)(J,{}),Object(p.jsx)(R,{products:t,title:"Hot prices"}),Object(p.jsx)(V,{}),Object(p.jsx)(R,{products:c,title:"Brand new models"})]})})},Y=(c(58),function(){var e=Object(b.m)().pathname;return Object(d.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[e]),null}),X=c.p+"static/media/Home.e110292a.svg",Z=(c(59),function(e){var t=e.productName,c=e.productType;return Object(p.jsxs)("div",{"data-cy":"breadCrumbs",className:"phones-page__indicator indicator-name",children:[Object(p.jsx)("div",{className:"indicator-name__image",children:Object(p.jsx)(r.b,{to:"/",children:Object(p.jsx)("img",{src:X,alt:"home",className:"indicator-name__img"})})}),Object(p.jsx)("div",{className:"indicator-name__arrow",children:"<"}),Object(p.jsx)(r.b,{to:"/".concat(c.toLowerCase()),className:"indicator-name__title",children:c}),t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"indicator-name__arrow",children:"<"}),Object(p.jsx)("div",{className:"indicator-name__title",children:t})]})]})}),W=(c(33),c(60),function(e){var t=e.category;return Object(p.jsx)("div",{className:"results-not-found bg-blue-500",children:"cart"===t?"Your cart is empty":"".concat(t," not found")})}),G=(c(61),function(e){var t=e.totalPages,c=e.currentPage,a=e.handlePageChange,n=e.category,r=[],s=c-1,i=c+1;c<=3?i=(s=1)+4:c>=t-2&&(s=(i=t)-4),s>2?r.push(1,"..."):r.push(1,2);for(var o=s;o<=i;o+=1)1!==o&&2!==o&&r.push(o);return i<t-1?r.push("...",t):i===t-1&&r.push(t),Object(p.jsxs)("div",{"data-cy":"pagination",className:"".concat(n,"-page__pagination pagination"),children:[Object(p.jsx)("button",{type:"button",onClick:function(){return a(c-1)},disabled:1===c,className:"pagination__button pagination_button_l","data-cy":"paginationLeft",children:"<"}),r.map((function(e,t){return"number"===typeof e?Object(p.jsx)("button",{type:"button",onClick:function(){return a(e)},className:f()("pagination__button",{active:c===e}),children:e},"".concat(e,"_").concat(t)):Object(p.jsx)("div",{className:"dots",children:"..."},"".concat(e,"_").concat(t))})),Object(p.jsx)("button",{type:"button",onClick:function(){return a(c+1)},disabled:c===t,className:"pagination__button pagination_button_r","data-cy":"paginationRight",children:">"})]})}),K=(c(62),function(e){var t=e.category,c=e.onChange,a=e.value;return"age"===e.sortBy?Object(p.jsxs)("div",{className:"".concat(t,"-page__sort-by"),children:[Object(p.jsx)("label",{className:"".concat(t,"-page__label"),htmlFor:"sort-by",children:"Sort by:"}),Object(p.jsxs)("select",{className:"".concat(t,"-page__select"),id:"sort-by",name:"sort-by",onChange:c,value:a,children:[Object(p.jsx)("option",{value:"age",children:"Newest"}),Object(p.jsx)("option",{value:"price",children:"Cheapest"}),Object(p.jsx)("option",{value:"name",children:"Alphabetically"})]})]}):Object(p.jsxs)("div",{className:"".concat(t,"-page__items-per-page"),children:[Object(p.jsx)("label",{className:"".concat(t,"-page__label"),htmlFor:"items-per-page",children:"Items per page:"}),Object(p.jsxs)("select",{className:"".concat(t,"-page__select"),id:"items-per-page",name:"items-per-page",onChange:c,value:a,children:[Object(p.jsx)("option",{value:"4",children:"4"}),Object(p.jsx)("option",{value:"8",children:"8"}),Object(p.jsx)("option",{value:"16",children:"16"}),Object(p.jsx)("option",{value:"All",children:"All"})]})]})}),z=function(){var e="phones",t=y((function(e){return e.products})).products,c=Object(r.d)(),a=Object(o.a)(c,2),n=a[0],s=a[1],i=n.get("perPage")||"4",l=n.get("sort")||"age",u=n.get("query"),j=Number(n.get("page")||"1"),b=Object(d.useState)(j),m=Object(o.a)(b,2),h=m[0],O=m[1],f=Object(d.useCallback)((function(e){var t=e.target.value;n.set("sort",t),s(n)}),[n,s]),g=Object(d.useCallback)((function(e){var t=e.target.value;n.set("perPage",t),n.set("page","1"),s(n),O(1)}),[n,s]),_=Object(d.useCallback)((function(e){O(e),s(B(n,{page:e.toString()}))}),[n,s]),v=Object(d.useCallback)((function(e){if("All"===i)return e;var t=(h-1)*parseInt(i,10);return e.slice(t,t+parseInt(i,10))}),[i,h]),x=Object(d.useMemo)((function(){return t.filter((function(t){return t.category===e&&(null===u||""===u||t.name.toLowerCase().includes(u.toLowerCase()))}))}),[t,u,e]),N=Object(d.useMemo)((function(){return M(x,n.get("sort")||"age")}),[x,n]),k=Object(d.useMemo)((function(){return v(N)}),[v,N]),S=Object(d.useMemo)((function(){return"All"===i?1:Math.ceil(N.length/parseInt(i,10))}),[i,N]);return Object(d.useEffect)((function(){n.get("sort")||s(B(n,{sort:"age"}))}),[]),Object(d.useEffect)((function(){h!==j&&O(j)}),[j]),Object(p.jsx)("main",{className:"".concat(e,"-page"),children:Object(p.jsxs)("div",{className:"".concat(e,"-page__container"),children:[Object(p.jsx)(Z,{productType:e}),Object(p.jsx)("h1",{className:"".concat(e,"-page__title"),children:e.slice(0,1).toUpperCase()+e.slice(1)}),Object(p.jsx)("p",{className:"".concat(e,"-page__subtitle"),children:"".concat(N.length," models")}),N.length>0?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"".concat(e,"-page__navigation-filter"),children:[Object(p.jsx)(K,{category:e,onChange:f,value:l,sortBy:"age"}),Object(p.jsx)(K,{category:e,onChange:g,value:i,sortBy:"page"})]}),Object(p.jsx)("div",{"data-cy":"productList",className:"".concat(e,"-page__row"),children:null===k||void 0===k?void 0:k.map((function(e){return Object(p.jsx)(q,{card:e},e.id)}))}),"All"!==i&&Object(p.jsx)(G,{totalPages:S,currentPage:h,handlePageChange:_,category:e})]}):Object(p.jsx)(W,{category:e})]})})},$=function(){var e="tablets",t=y((function(e){return e.products})).products,c=Object(r.d)(),a=Object(o.a)(c,2),n=a[0],s=a[1],i=n.get("perPage")||"4",l=n.get("sort")||"age",u=n.get("query"),j=Number(n.get("page")||"1"),b=Object(d.useState)(j),m=Object(o.a)(b,2),h=m[0],O=m[1],f=Object(d.useCallback)((function(e){var t=e.target.value;n.set("sort",t),s(n)}),[n,s]),g=Object(d.useCallback)((function(e){var t=e.target.value;n.set("perPage",t),n.set("page","1"),s(n),O(1)}),[n,s]),_=Object(d.useCallback)((function(e){O(e),s(B(n,{page:e.toString()}))}),[n,s]),v=Object(d.useCallback)((function(e){if("All"===i)return e;var t=(h-1)*parseInt(i,10);return e.slice(t,t+parseInt(i,10))}),[i,h]),x=Object(d.useMemo)((function(){return t.filter((function(t){return t.category===e&&(null===u||""===u||t.name.toLowerCase().includes(u.toLowerCase()))}))}),[t,u,e]),N=Object(d.useMemo)((function(){return M(x,n.get("sort")||"age")}),[x,n]),k=Object(d.useMemo)((function(){return v(N)}),[v,N]),S=Object(d.useMemo)((function(){return"All"===i?1:Math.ceil(N.length/parseInt(i,10))}),[i,N]);return Object(d.useEffect)((function(){n.get("sort")||s(B(n,{sort:"age"}))}),[]),Object(d.useEffect)((function(){h!==j&&O(j)}),[j]),Object(p.jsx)("main",{className:"".concat(e,"-page"),children:Object(p.jsxs)("div",{className:"".concat(e,"-page__container"),children:[Object(p.jsx)(Z,{productType:e}),Object(p.jsx)("h1",{className:"".concat(e,"-page__title"),children:e.slice(0,1).toUpperCase()+e.slice(1)}),Object(p.jsx)("p",{className:"".concat(e,"-page__subtitle"),children:"".concat(N.length," models")}),N.length>0?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"".concat(e,"-page__navigation-filter"),children:[Object(p.jsx)(K,{category:e,onChange:f,value:l,sortBy:"age"}),Object(p.jsx)(K,{category:e,onChange:g,value:i,sortBy:"page"})]}),Object(p.jsx)("div",{"data-cy":"productList",className:"".concat(e,"-page__row"),children:null===k||void 0===k?void 0:k.map((function(e){return Object(p.jsx)(q,{card:e},e.id)}))}),"All"!==i&&Object(p.jsx)(G,{totalPages:S,currentPage:h,handlePageChange:_,category:e})]}):Object(p.jsx)(W,{category:e})]})})},ee=function(){var e="accessories",t=y((function(e){return e.products})).products,c=Object(r.d)(),a=Object(o.a)(c,2),n=a[0],s=a[1],i=n.get("perPage")||"4",l=n.get("sort")||"age",u=n.get("query"),j=Number(n.get("page")||"1"),b=Object(d.useState)(j),m=Object(o.a)(b,2),h=m[0],O=m[1],f=Object(d.useCallback)((function(e){var t=e.target.value;n.set("sort",t),s(n)}),[n,s]),g=Object(d.useCallback)((function(e){var t=e.target.value;n.set("perPage",t),n.set("page","1"),s(n),O(1)}),[n,s]),_=Object(d.useCallback)((function(e){O(e),s(B(n,{page:e.toString()}))}),[n,s]),v=Object(d.useCallback)((function(e){if("All"===i)return e;var t=(h-1)*parseInt(i,10);return e.slice(t,t+parseInt(i,10))}),[i,h]),x=Object(d.useMemo)((function(){return t.filter((function(t){return t.category===e&&(null===u||""===u||t.name.toLowerCase().includes(u.toLowerCase()))}))}),[t,u,e]),N=Object(d.useMemo)((function(){return M(x,n.get("sort")||"age")}),[x,n]),k=Object(d.useMemo)((function(){return v(N)}),[v,N]),S=Object(d.useMemo)((function(){return"All"===i?1:Math.ceil(N.length/parseInt(i,10))}),[i,N]);return Object(d.useEffect)((function(){n.get("sort")||s(B(n,{sort:"age"}))}),[]),Object(d.useEffect)((function(){h!==j&&O(j)}),[j]),Object(p.jsx)("main",{className:"".concat(e,"-page"),children:Object(p.jsxs)("div",{className:"".concat(e,"-page__container"),children:[Object(p.jsx)(Z,{productType:e}),Object(p.jsx)("h1",{className:"".concat(e,"-page__title"),children:e.slice(0,1).toUpperCase()+e.slice(1)}),Object(p.jsx)("p",{className:"".concat(e,"-page__subtitle"),children:"".concat(N.length," models")}),N.length>0?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"".concat(e,"-page__navigation-filter"),children:[Object(p.jsx)(K,{category:e,onChange:f,value:l,sortBy:"age"}),Object(p.jsx)(K,{category:e,onChange:g,value:i,sortBy:"page"})]}),Object(p.jsx)("div",{"data-cy":"productList",className:"".concat(e,"-page__row"),children:null===k||void 0===k?void 0:k.map((function(e){return Object(p.jsx)(q,{card:e},e.id)}))}),"All"!==i&&Object(p.jsx)(G,{totalPages:S,currentPage:h,handlePageChange:_,category:e})]}):Object(p.jsx)(W,{category:e})]})})},te=function(){return Object(p.jsx)("main",{className:"phones-page",children:Object(p.jsx)("div",{className:"phones-page__container",children:Object(p.jsx)("p",{children:"Page not found"})})})},ce=c(17),ae=Object(ce.b)({name:"products",initialState:{products:[]},reducers:{set:function(e,t){e.products=t.payload}}}),ne=ae.reducer,re=ae.actions.set,se="https://mate.academy/students-api";function ie(e){return new Promise((function(t){setTimeout(t,e)}))}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:t};return c&&(a.body=JSON.stringify(c),a.headers={"Content-Type":"application/json; charset=UTF-8"}),ie(300).then((function(){return fetch(se+e,a)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var le=function(e){return oe(e)},ue=function(e,t){return oe(e,"POST",t)},de=function(){var e=Object(i.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le("/users?email=".concat(t));case 2:return c=e.sent,e.abrupt("return",c[0]||null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(i.a)(u.a.mark((function e(t){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.email,a=t.name,e.abrupt("return",ue("/users",{email:c,name:a}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=Object(ce.b)({name:"user",initialState:{user:null,loading:!1,error:null},reducers:{setUser:function(e,t){e.user=t.payload},setLoading:function(e,t){e.loading=t.payload},setError:function(e,t){e.error=t.payload}}}),me=be.reducer,pe=be.actions,he=pe.setUser,Oe=(pe.setLoading,pe.setError,function(){var e=N(),t=Object(d.useState)(""),c=Object(o.a)(t,2),a=c[0],n=c[1],r=Object(d.useState)(""),s=Object(o.a)(r,2),l=s[0],j=s[1],b=Object(d.useState)(!1),m=Object(o.a)(b,2),h=m[0],O=m[1],g=Object(d.useState)(!1),_=Object(o.a)(g,2),v=_[0],x=_[1],y=Object(d.useState)(""),k=Object(o.a)(y,2),S=k[0],w=k[1],C=function(t){localStorage.setItem("user",JSON.stringify(t)),e(he(t))};Object(d.useLayoutEffect)((function(){var t=localStorage.getItem("user");if(t)try{var c=JSON.parse(t);e(he(c))}catch(a){throw new Error("".concat(a,": couldn't handle the request"))}}),[]);var A=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(a);case 2:(t=e.sent)?C(t):O(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),w(""),x(!0),e.prev=3,!h){e.next=9;break}return e.next=7,je({name:l,email:a}).then(C);case 7:e.next=11;break;case 9:return e.next=11,A();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),w("Something went wrtong");case 16:return e.prev=16,x(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("form",{onSubmit:I,className:"box mt-5",children:[Object(p.jsx)("h1",{className:"title is-3",children:h?"You need to register":"Log in to open the source"}),Object(p.jsxs)("div",{className:"field",children:[Object(p.jsx)("label",{className:"label",htmlFor:"user-email",children:"Email"}),Object(p.jsxs)("div",{className:f()("control has-icons-left",{"is-loading":v}),children:[Object(p.jsx)("input",{type:"email",id:"user-email",className:f()("input",{"is-danger":!h&&S}),placeholder:"Enter your email",disabled:v||h,value:a,required:!0,onChange:function(e){return n(e.target.value)}}),Object(p.jsx)("span",{className:"icon is-small is-left",children:Object(p.jsx)("i",{className:"fas fa-envelope"})})]}),!h&&S&&Object(p.jsx)("p",{className:"help is-danger",children:S})]}),h&&Object(p.jsxs)("div",{className:"field",children:[Object(p.jsx)("label",{className:"label",htmlFor:"user-name",children:"Your Name"}),Object(p.jsxs)("div",{className:f()("control has-icons-left",{"is-loading":v}),children:[Object(p.jsx)("input",{type:"text",id:"user-name",className:f()("input",{"is-danger":h&&S}),placeholder:"Enter your name",required:!0,minLength:4,disabled:v,value:l,onChange:function(e){return j(e.target.value)}}),Object(p.jsx)("span",{className:"icon is-small is-left",children:Object(p.jsx)("i",{className:"fas fa-user"})})]}),h&&S&&Object(p.jsx)("p",{className:"help is-danger",children:S})]}),Object(p.jsx)("div",{className:"field",children:Object(p.jsx)("button",{type:"submit",className:f()("button is-primary",{"is-loading":v}),children:h?"Register":"Login"})})]})}),fe=(c(65),function(e){var t=e.text,c=e.value;return Object(p.jsxs)("div",{className:"product-details-description__text-container",children:[Object(p.jsx)("div",{className:"description-text-template",children:t}),Object(p.jsx)("div",{className:"description-value-template",children:c})]})}),ge=function(e){var t=e.productInfo,c=e.specs,a=function(e){switch(e){case"Screen":return t.screen;case"Resolution":return t.resolution;case"Processor":return t.processor;case"RAM":return t.ram;case"Built in memory":return t.capacity;case"Camera":return t.camera;case"Zoom":return t.zoom;case"Cell":return t.cell.join(" ");default:return""}};return Object(p.jsx)(p.Fragment,{children:c.map((function(e){return Object(p.jsx)(fe,{text:e.label,value:a(e.label)},e.label)}))})},_e=Object(ce.b)({name:"productInfo",initialState:{productInfo:null,selectedCapacity:null,selectedColor:null},reducers:{setProduct:function(e,t){e.productInfo=t.payload},setCapacity:function(e,t){e.selectedCapacity=t.payload},setColor:function(e,t){e.selectedColor=t.payload}}}),ve=_e.reducer,xe=_e.actions,Ne=xe.setProduct,ye=xe.setCapacity,ke=xe.setColor,Se=function(){var e=N(),t=y((function(e){return e.user})).user,c=null===t||void 0===t?void 0:t.id,a=y((function(e){return e.products})).products,n=y((function(e){return e.productInfo})),s=n.productInfo,i=n.selectedCapacity,l=n.selectedColor,u=Object(d.useState)(!1),j=Object(o.a)(u,2),b=j[0],m=j[1],h=Object(d.useState)(!1),O=Object(o.a)(h,2),_=O[0],v=O[1],x=Object(d.useState)(C+(null===s||void 0===s?void 0:s.images[0])),k=Object(o.a)(x,2),S=k[0],w=k[1],A=a.find((function(e){return e.phoneId===(null===s||void 0===s?void 0:s.id)})),I=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]};return Object(d.useEffect)((function(){w(C+(null===s||void 0===s?void 0:s.images[0]));var e=a.find((function(e){return e.phoneId===(null===s||void 0===s?void 0:s.id)}));if(e){var t=I("favourites");v(t.some((function(t){return t.id===e.id})));var c=I("cart");m(c.some((function(t){return t.id===e.id})))}}),[s,a]),s?Object(p.jsxs)("section",{className:"product-info__row",children:[Object(p.jsx)("div",{className:" product-info__column product-details product-info__column_small ",children:s.images.map((function(e){return Object(p.jsx)("div",{className:"product-details__image",onClick:function(t){return function(e,t){null===e||void 0===e||e.preventDefault(),w(t)}(t,C+e)},children:Object(p.jsx)("button",{className:"product-details__image-link",type:"button",children:Object(p.jsx)("img",{src:C+e,alt:"ProductSmallImage",className:"product-details__small-img"})})},e)}))}),Object(p.jsx)("div",{className:"product-info__column",children:Object(p.jsx)("div",{className:"product-info__main-image",children:Object(p.jsx)("div",{className:"product-info__main-image-link",children:Object(p.jsx)("img",{src:S,alt:"MainProductImage",className:"product-info__main-img"})})})}),Object(p.jsxs)("div",{className:"product-info__column product-details-description",children:[Object(p.jsx)("div",{className:"product-details-description__subtitle",children:"Available colors"}),Object(p.jsx)("div",{className:"product-details-description__colors",children:s.colorsAvailable.map((function(t){return Object(p.jsx)(r.b,{to:"/phones/".concat(s.namespaceId,"-").concat(s.capacity.toLowerCase(),"-").concat(t.toLowerCase()),className:f()("product-details-description__color",{"active-color":l===t}),style:{backgroundColor:"midnightgreen"===t?"#004953":t},onClick:function(){return e(ke(t))}},t)}))}),Object(p.jsx)("div",{className:"product-details-description__subtitle",children:"Select capacity"}),Object(p.jsx)("div",{className:"product-details-description__capacity",children:s.capacityAvailable.map((function(t){return Object(p.jsx)(r.b,{to:"/phones/".concat(s.namespaceId,"-").concat(t.toLowerCase(),"-").concat(s.color),className:f()("product-details-description__capacity-available",{"active-capacity":i===t}),onClick:function(){return e(ye(t))},children:t},t)}))}),Object(p.jsxs)("div",{className:"prices",children:[Object(p.jsxs)("div",{className:"prices__discount",children:["$",s.priceDiscount]}),Object(p.jsxs)("div",{className:"prices__full-price",children:["$",s.priceRegular]})]}),Object(p.jsxs)("div",{className:"product-details-description__footer",children:[Object(p.jsx)("button",{type:"button",className:f()({"card-button-template":!0,"product-details-description__card":!0,"is-active":b}),onClick:function(){var e=localStorage.getItem("cart-".concat(c)),t=e?JSON.parse(e):[];A&&!t.some((function(e){return e.id===A.id}))&&(t.push(Object(U.a)(Object(U.a)({},A),{},{quantity:1})),m(!0),localStorage.setItem("cart-".concat(c),JSON.stringify(t)),window.dispatchEvent(new Event("cartUpdated")))},children:b?"Added to cart":"Add to cart"}),Object(p.jsx)("button",{type:"button",className:"card-button-template__like",onClick:function(){var e=localStorage.getItem("favourites-".concat(c)),t=e?JSON.parse(e):[],n=a.find((function(e){return e.phoneId===(null===s||void 0===s?void 0:s.id)}));if(n){var r=t.findIndex((function(e){return e.id===n.id}));-1===r?(t.push(n),v(!0)):(t.splice(r,1),v(!1)),localStorage.setItem("favourites-".concat(c),JSON.stringify(t)),window.dispatchEvent(new Event("favouritesUpdated"))}},style:{backgroundColor:"#fff"},children:Object(p.jsx)("img",{src:_?T:g,alt:"ProductImage",className:"card-button-template__favourite"})})]}),Object(p.jsx)(ge,{productInfo:s,specs:[{key:"screen",label:"Screen"},{key:"resolution",label:"Resolution"},{key:"processor",label:"Processor"},{key:"ram",label:"RAM"}]})]}),Object(p.jsxs)("div",{className:" product-info__column product-details product-info__column_small ",children:["ID: ",s.namespaceId]})]}):null},we=(c(66),function(e){var t=e.description;return Object(p.jsxs)("div",{className:"about-product__column column-product-about",children:[Object(p.jsx)("div",{className:"column-product-about__title",children:"About"}),t.description.map((function(e){return Object(p.jsxs)(j.a.Fragment,{children:[Object(p.jsx)("div",{className:"about-product__title",children:e.title}),Object(p.jsx)("div",{className:"about-product__text",children:e.text})]},e.title)}))]})}),Ce=c(73),Ae=function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%)"},children:Object(p.jsx)(Ce.a,{size:15,color:"#D63636"})})})},Ie=function(){var e=Object(b.o)();return Object(p.jsxs)("div",{className:"product-info__back back-to-page",children:[Object(p.jsx)("button",{type:"button",onClick:function(){return e(-1)},className:"back-to-page__link","data-cy":"backButton",children:"<"}),Object(p.jsx)("button",{type:"button",onClick:function(){return e(-1)},className:"back-to-page__link","data-cy":"backButton",children:"Back"})]})},Ee=function(){var e=N(),t=y((function(e){return e.products})).products,c=y((function(e){return e.productInfo})).productInfo,a=Object(d.useState)(!0),n=Object(o.a)(a,2),r=n[0],s=n[1],l=Object(b.q)().productId;return Object(d.useEffect)((function(){function t(){return(t=Object(i.a)(u.a.mark((function t(){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(!0),t.next=4,I("".concat(C,"products/").concat(l,".json"));case 4:c=t.sent,e(Ne(c)),e(ke(c.color)),e(ye(c.capacity)),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),new Error("Data could not be fetched");case 13:return t.prev=13,s(!1),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[l]),c?Object(p.jsx)("main",{className:"product-info",children:r?Object(p.jsx)(Ae,{}):Object(p.jsxs)("div",{className:"product-info__container",children:[Object(p.jsx)(Z,{productName:c.name,productType:"Phones"}),Object(p.jsx)(Ie,{}),Object(p.jsx)("div",{className:"product-info__title",children:c.name}),Object(p.jsx)(Se,{}),Object(p.jsx)("section",{"data-cy":"productDescription",className:"product-info__about about-product",children:Object(p.jsxs)("div",{className:"about-product__row",children:[Object(p.jsx)(we,{description:c}),Object(p.jsxs)("div",{className:"about-product__column column-product-about",children:[Object(p.jsx)("div",{className:"column-product-about__title",children:"Tech specs"}),Object(p.jsx)(ge,{productInfo:c,specs:[{key:"screen",label:"Screen"},{key:"resolution",label:"Resolution"},{key:"processor",label:"Processor"},{key:"ram",label:"RAM"},{key:"capacity",label:"Built in memory"},{key:"camera",label:"Camera"},{key:"zoom",label:"Zoom"},{key:"cell",label:"Cell"}]})]})]})}),Object(p.jsx)(R,{title:"You may also like",products:Object(S.a)(t).sort((function(){return Math.random()-.5}))})]})}):r?Object(p.jsx)(Ae,{}):Object(p.jsx)("div",{children:"somewthing went wrong"})},Pe=function(){var e=y((function(e){return e.user})).user,t=null===e||void 0===e?void 0:e.id,c=localStorage.getItem("favourites-".concat(t)),a=c?JSON.parse(c):[],n=Object(d.useState)(a),s=Object(o.a)(n,1)[0],i=Object(r.d)(),l=Object(o.a)(i,1)[0].get("query"),u=Object(d.useMemo)((function(){return s.filter((function(e){return null===l||""===l||e.name.toLowerCase().includes(l.toLowerCase())}))}),[s,l]);return Object(p.jsx)("main",{className:"phones-page",children:Object(p.jsxs)("div",{className:"phones-page__container",children:[Object(p.jsx)(Ie,{}),Object(p.jsx)("div",{className:"phones-page__title",children:"Favourites"}),Object(p.jsxs)("div",{className:"phones-page__subtitle",children:[u.length," models"]}),u.length>0?Object(p.jsx)("div",{className:"phones-page__row",children:u.map((function(e){return Object(p.jsx)(q,{card:e},e.id)}))}):Object(p.jsx)(W,{category:"favourites"})]})})},Le=c(40),Be=c(39),Me=(c(69),function(e){var t=e.phone,c=e.handleDeleteClick,a=e.updateCart,n=t.image,r=t.name,s=t.price,i=t.quantity,l=Object(d.useState)(i||1),u=Object(o.a)(l,2),j=u[0],b=u[1],m=y((function(e){return e.user})).user,h=null===m||void 0===m?void 0:m.id;return Object(d.useEffect)((function(){var e=localStorage.getItem("cart-".concat(h)),c=(e?JSON.parse(e):[]).map((function(e){return e.id===t.id?Object(U.a)(Object(U.a)({},e),{},{quantity:j}):e}));localStorage.setItem("cart-".concat(h),JSON.stringify(c)),a(c)}),[j]),Object(p.jsx)("div",{className:"column-cart-description",children:Object(p.jsxs)("div",{className:"column-cart-description__content",children:[Object(p.jsx)("button",{type:"button",className:"column-cart-description__close",onClick:function(){return c(r)},"data-cy":"cartDeleteButton",children:Object(p.jsx)("div",{className:"fa-icon__cross",children:Object(p.jsx)(Le.a,{icon:Be.a})})}),Object(p.jsx)("div",{className:"column-cart-description__image",children:Object(p.jsx)("img",{src:C+n,alt:"PhoneImage",className:"column-cart-description__img"})}),Object(p.jsx)("div",{className:"column-cart-description__title",children:r}),Object(p.jsxs)("div",{className:"column-cart-description__add-buttons",children:[Object(p.jsx)("button",{type:"button",className:f()({"column-cart-description__button":!0,"column-cart-description_remove":!0}),onClick:function(){j>1&&b((function(e){return e-1}))},children:"-"}),Object(p.jsx)("div",{className:"column-cart-description__count",children:j}),Object(p.jsx)("button",{type:"button",className:f()({"column-cart-description__button":!0,"column-cart-description_add":!0}),onClick:function(){j>=1&&b((function(e){return e+1}))},children:"+"})]}),Object(p.jsxs)("div",{className:"column-cart-description__price",children:["$",s*j]})]})})}),Je=(c(70),function(){var e=y((function(e){return e.user})).user,t=null===e||void 0===e?void 0:e.id,c=localStorage.getItem("cart-".concat(t)),a=c?JSON.parse(c):[],n=Object(d.useState)(0),r=Object(o.a)(n,2),s=r[0],i=r[1],l=Object(d.useState)(0),u=Object(o.a)(l,2),j=u[0],b=u[1],m=Object(d.useState)(a),h=Object(o.a)(m,2),O=h[0],g=h[1],_=Object(d.useState)(!1),v=Object(o.a)(_,2),x=v[0],N=v[1],k=null;Object(d.useEffect)((function(){return function(){k&&clearTimeout(k)}}),[]);var S=function(e){g(e),localStorage.setItem("cart-".concat(t),JSON.stringify(e)),function(e){var t=e.reduce((function(e,t){return e+t.price*(t.quantity||1)}),0),c=e.reduce((function(e,t){return e+(t.quantity||1)}),0);i(t),b(c)}(e)},w=function(e){var t=O.filter((function(t){return t.name!==e}));S(t),window.dispatchEvent(new Event("cartUpdated"))};return Object(p.jsx)("main",{className:"cart-page",children:Object(p.jsxs)("div",{className:"cart-page__container",children:[Object(p.jsx)(Ie,{}),Object(p.jsx)("div",{className:"cart-page__title",children:"Cart"}),O.length>0?Object(p.jsxs)("div",{className:"cart-page__row",children:[Object(p.jsx)("div",{className:"cart-page__column cart-page__column_big",children:O.map((function(e){return Object(p.jsx)(Me,{phone:e,handleDeleteClick:w,updateCart:S},e.id)}))}),Object(p.jsxs)("div",{className:f()({"cart-page__column":!0,"cart-page__column_small":!0,"column-cart":!0}),children:[Object(p.jsxs)("div",{className:"column-cart__content",children:[Object(p.jsx)("div",{className:"column-cart__price",children:"$".concat(s)}),Object(p.jsx)("div",{"data-cy":"productQauntity",className:"column-cart__quantity",children:"Total for ".concat(j," items")}),Object(p.jsx)("button",{type:"button",className:"column-cart__checkout",onClick:function(){N(!0),k=setTimeout((function(){N(!1)}),3e3)},children:"Checkout"})]}),x&&Object(p.jsx)("div",{className:"column-cart__content feature-message",children:"We are sorry, but this feature is not implemented yet"})]})]}):Object(p.jsx)(W,{category:"cart"})]})})}),Ue=function(){var e=N(),t=y((function(e){return e.user})).user,c=Object(d.useState)(!1),a=Object(o.a)(c,2),n=a[0],r=a[1];return Object(d.useEffect)((function(){function t(){return(t=Object(i.a)(u.a.mark((function t(){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.prev=1,t.next=4,P(w);case 4:c=t.sent,e(re(c)),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(1),new Error("Data could not be fetched");case 11:return t.prev=11,r(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),t||n?Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(Y,{}),Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsx)(k,{}),n?Object(p.jsx)(Ae,{}):Object(p.jsxs)(b.d,{children:[Object(p.jsx)(b.b,{path:"/",element:Object(p.jsx)(H,{})}),Object(p.jsxs)(b.b,{path:"phones",children:[Object(p.jsx)(b.b,{index:!0,element:Object(p.jsx)(z,{})}),Object(p.jsx)(b.b,{path:":productId",element:Object(p.jsx)(Ee,{})})]}),Object(p.jsxs)(b.b,{path:"tablets",children:[Object(p.jsx)(b.b,{index:!0,element:Object(p.jsx)($,{})}),Object(p.jsx)(b.b,{path:":productId",element:Object(p.jsx)(Ee,{})})]}),Object(p.jsxs)(b.b,{path:"accessories",children:[Object(p.jsx)(b.b,{index:!0,element:Object(p.jsx)(ee,{})}),Object(p.jsx)(b.b,{path:":productId",element:Object(p.jsx)(Ee,{})})]}),Object(p.jsx)(b.b,{path:"favourites",element:Object(p.jsx)(Pe,{})}),Object(p.jsx)(b.b,{path:"cart",element:Object(p.jsx)(Je,{})}),Object(p.jsx)(b.b,{path:"*",element:Object(p.jsx)(te,{})}),Object(p.jsx)(b.b,{path:"home",element:Object(p.jsx)(b.a,{to:"/",replace:!0})})]}),Object(p.jsx)(h,{})]})]}):Object(p.jsx)(Oe,{})},Te=Object(ce.a)({reducer:{products:ne,productInfo:ve,user:me}});n.a.render(Object(p.jsx)(s.a,{store:Te,children:Object(p.jsx)(r.a,{children:Object(p.jsx)(Ue,{})})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.d4efc124.chunk.js.map